<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1251">
<title>Introduction to Programming with Java Book - Chapter 12</title>

<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 5 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 1 6 1 0 1 1 1 1 1;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Latha;
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Raavi;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Shruti;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tunga;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial CYR";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:SunSans-Regular;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:SAfon;}
@font-face
	{font-family:"Courier New CYR";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:StarSymbol;}
@font-face
	{font-family:OpenSymbol;
	panose-1:5 1 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Sawasdee;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:"MV Boli";}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Academy;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Antiqua;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Baltica;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Bookvar;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Ariel";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Courier";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Dutch Roman";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Garamond";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Garamond Italic";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Italic";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Kursiv";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Palatia";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Roman";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Roman Italic";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Times";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bulgarian Times Italic";
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Domkrat;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:Geneva;
	panose-1:2 2 226 0 0 0 0 0 0 0;}
@font-face
	{font-family:Hebar;
	panose-1:2 11 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:Izhitsa;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Kaliakra;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:Karina;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:KarinaBlack;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:OldCyr;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Opal;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:OpalB;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:TimesNakov;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Timok;
	panose-1:2 11 114 0 0 0 0 0 0 0;}
@font-face
	{font-family:TmsCyr;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Zhikaryov;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"OCR-B 10 BT";
	panose-1:2 11 6 1 2 2 2 2 2 4;}
@font-face
	{font-family:"OCR-A BT";
	panose-1:2 15 5 1 2 2 4 2 3 4;}
@font-face
	{font-family:"WP MultinationalA Courier";
	panose-1:5 0 0 9 0 0 0 0 0 0;}
@font-face
	{font-family:"WP MultinationalB Courier";
	panose-1:2 6 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"WP MultinationalA Helve";
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"WP MultinationalB Helve";
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"WP MultinationalA Roman";
	panose-1:2 2 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"WP MultinationalB Roman";
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Nina;
	panose-1:2 11 6 6 3 5 4 4 2 4;}
@font-face
	{font-family:sshlinedraw;
	panose-1:0 0 4 9 0 0 0 0 0 0;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"DejaVu Sans";
	panose-1:2 11 6 3 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Condensed";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"DejaVu Serif";
	panose-1:2 6 6 3 5 6 5 2 2 4;}
@font-face
	{font-family:"DejaVu Serif Condensed";
	panose-1:2 6 6 6 5 6 5 2 2 4;}
@font-face
	{font-family:"DejaVu Sans Light";
	panose-1:2 11 2 3 3 8 4 2 2 4;}
@font-face
	{font-family:"Myriad Pro";
	panose-1:2 11 6 6 3 4 3 2 2 4;}
@font-face
	{font-family:"Myriad Web";
	panose-1:2 11 8 3 3 4 3 2 2 4;}
@font-face
	{font-family:"Myriad Web Pro";
	panose-1:2 11 5 3 3 4 3 2 2 4;}
@font-face
	{font-family:Myriade;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Myriad Web Pro Condensed";
	panose-1:2 11 5 6 3 4 3 2 2 4;}
@font-face
	{font-family:"Segoe Condensed";
	panose-1:2 11 6 6 4 2 0 2 2 3;}
@font-face
	{font-family:ZWAdobeF;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@StarSymbol";}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:.5in;
	margin-left:0in;
	text-align:center;
	page-break-after:avoid;
	font-size:24.0pt;
	font-family:"Verdana","sans-serif";}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Verdana","sans-serif";}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Verdana","sans-serif";}
h4
	{mso-style-link:"Heading 4 Char";
	margin-top:9.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:11.0pt;
	font-family:"Verdana","sans-serif";}
h5
	{mso-style-link:"Heading 5 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#243F60;
	font-weight:normal;}
h6
	{mso-style-link:"Heading 6 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#243F60;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"Heading 7 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"Heading 8 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"Heading 9 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:3.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:9.9pt;
	text-align:justify;
	font-size:9.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:20.15pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:8.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:30.05pt;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:8.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:14.15pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-indent:-14.15pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	background:navy;
	font-size:10.0pt;
	font-family:"Tahoma","sans-serif";}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoRMPane, li.MsoRMPane, div.MsoRMPane
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.Heading4Char
	{mso-style-name:"Heading 4 Char";
	mso-style-link:"Heading 4";
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.Heading5Char
	{mso-style-name:"Heading 5 Char";
	mso-style-link:"Heading 5";
	font-family:"Cambria","serif";
	color:#243F60;}
span.Heading6Char
	{mso-style-name:"Heading 6 Char";
	mso-style-link:"Heading 6";
	font-family:"Cambria","serif";
	color:#243F60;
	font-style:italic;}
span.Heading7Char
	{mso-style-name:"Heading 7 Char";
	mso-style-link:"Heading 7";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.Heading8Char
	{mso-style-name:"Heading 8 Char";
	mso-style-link:"Heading 8";
	font-family:"Cambria","serif";
	color:#404040;}
span.Heading9Char
	{mso-style-name:"Heading 9 Char";
	mso-style-link:"Heading 9";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.Code
	{mso-style-name:Code;
	font-family:"Courier New";
	font-weight:bold;}
p.WarningMessage, li.WarningMessage, div.WarningMessage
	{mso-style-name:"Warning Message";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
p.WarningMessageAfter6pt, li.WarningMessageAfter6pt, div.WarningMessageAfter6pt
	{mso-style-name:"Warning Message + After\:  6 pt";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	text-align:justify;
	font-size:10.0pt;
	font-family:"Verdana","sans-serif";
	font-weight:bold;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page Section1
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section1
	{page:Section1;}
@page Section2
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section2
	{page:Section2;}
@page Section3
	{size:467.8pt 666.25pt;
	margin:49.6pt 42.55pt 28.35pt 42.55pt;}
div.Section3
	{page:Section3;}
@page Section4
	{size:467.8pt 666.25pt;
	margin:49.6pt 42.55pt 28.35pt 42.55pt;}
div.Section4
	{page:Section4;}
@page Section5
	{size:467.8pt 666.25pt;
	margin:49.6pt 42.55pt 28.35pt 42.55pt;}
div.Section5
	{page:Section5;}
@page Section6
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section6
	{page:Section6;}
@page Section7
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section7
	{page:Section7;}
@page Section8
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section8
	{page:Section8;}
@page Section9
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section9
	{page:Section9;}
@page Section10
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section10
	{page:Section10;}
@page Section11
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section11
	{page:Section11;}
@page Section12
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section12
	{page:Section12;}
@page Section13
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section13
	{page:Section13;}
@page Section14
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section14
	{page:Section14;}
@page Section15
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section15
	{page:Section15;}
@page Section16
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section16
	{page:Section16;}
@page Section17
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section17
	{page:Section17;}
@page Section18
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section18
	{page:Section18;}
@page Section19
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section19
	{page:Section19;}
@page Section20
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section20
	{page:Section20;}
@page Section21
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section21
	{page:Section21;}
@page Section22
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section22
	{page:Section22;}
@page Section23
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section23
	{page:Section23;}
@page Section24
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section24
	{page:Section24;}
@page Section25
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section25
	{page:Section25;}
@page Section26
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section26
	{page:Section26;}
@page Section27
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section27
	{page:Section27;}
@page Section28
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section28
	{page:Section28;}
@page Section29
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section29
	{page:Section29;}
@page Section30
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section30
	{page:Section30;}
@page Section31
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section31
	{page:Section31;}
@page Section32
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section32
	{page:Section32;}
@page Section33
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section33
	{page:Section33;}
@page Section34
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section34
	{page:Section34;}
@page Section35
	{size:467.8pt 666.25pt;
	margin:49.6pt 35.45pt 28.35pt 35.45pt;}
div.Section35
	{page:Section35;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div style="float:right">
	<div style="border: 1px solid #CCCCCC; width:400px; height:146px; padding: 8px; margin: 0px 0px 15px 15px">
		<div style="float:left"><a href="http://www.introprogramming.info/"><img border="0" src="Intro-Java-Book-front-cover.jpg" width="102" height="145"></a></div>
		<div style="float:right; width: 270px; height:143px; border: 1px solid #EEEEEE; background: #FAFAFA; padding: 0px 10px 0px 10px; margin:0; font-family: Arial, Helvetica; font-size:10pt; text-align: justify">
			<p style="margin-top:8px; margin-bottom:12px; padding:0">Настоящият текст е част от книгата на Светлин Наков и колектив:</p>
			<a href="http://www.introprogramming.info/" style="text-decoration:none">
				<div style="text-align:center; font-size: 13pt; font-weight: bold">Въведение в програмирането с Java</div>
			</a>
			<p style="margin-top:12px; padding:0">Можете да изтеглите цялата книга безплатно от <a href="http://www.introprogramming.info">www.introprogramming.info</a>.</p>
		</div>
	</div>
</div>

<div class=Section20>

<h1><a name="_Toc218278550"></a><a name="_Toc218195868"></a><a
name="_Глава_12._Обработка"></a><span lang=BG>Глава 12. Обработка на изключения</span></h1>

<h2><a name="_Toc218195869"><span lang=BG>Автор</span></a></h2>

<p class=MsoNormal style='margin-left:14.2pt'><span lang=BG>Лъчезар Цеков</span></p>

<p class=MsoNormal style='margin-left:14.2pt'><span lang=BG>Михаил Стойнов</span></p>

<p class=MsoNormal style='margin-left:14.2pt'><span lang=BG>Светлин Наков</span></p>

<h2><a name="_Toc218195870"><span lang=BG>В тази тема...</span></a></h2>

<p class=MsoNormal><span lang=BG>В настоящата тема ще се запознаем с
изключенията в Java и обектно</span>-<span lang=BG>ориентираното програмиране.
Ще се научим как да ги прихващаме чрез конструкцията </span><span class=Code><span
lang=BG>try-catch</span></span><span lang=BG>, как да ги предаваме на
предходните методи чрез </span><span class=Code><span lang=BG>throws </span></span><span
lang=BG>и как да хвърляме собствени или прихванати изключения. Ще дадем редица
примери за използването им.</span></p>

<p class=MsoNormal><span lang=BG>Ще разгледаме типовете изключения и йерархията,
която образуват. Накрая ще се запознаем с предимствата при използването на
изключения и с това как най-правилно да ги прилагаме в конкретни ситуации.</span></p>

<b><span lang=BG style='font-size:14.0pt;font-family:"Verdana","sans-serif"'><br
clear=all style='page-break-before:always'>
</span></b>

<h2><a name="_Toc218195871"><span lang=BG>Какво е изключение?</span></a></h2>

<p class=MsoNormal><span lang=BG>Докато програмираме ние описваме постъпково
какво трябва да направи компютъра и в повечето случаи разчитаме на нормалното
изпълнение на програмата. В повече от 99% от времето програмите следват този
норма­лен ход на изпълнение, но съществуват и изключения от това правило. Да
речем, че искаме да прочетем файл и да покажем съдържанието му на екрана. Името
на файла се подава от потребителя. По невнимание потре­бителя въвежда име на
файл, който не съществува. Програмата няма да може да се изпълни нормално и да
покаже съдържанието на файла на екрана. В този случай имаме изключение от
правилното изпълнение на програмата и за него трябва да се сигнализира на
потребителя и/или администратора.</span></p>

<h3><a name="_Toc218195872"><span lang=BG>Изключение</span></a></h3>

<p class=MsoNormal><b><span lang=BG>Изключение (</span></b><b>e<span lang=BG>xception)</span></b><span
lang=BG> в общия случай е уведомление за дадено събитие, нарушаващо нормалната
работа на една програма. Изключенията дават възможност това необичайно събитие
да бъде обработено и програ­мата да реагира по някакъв начин. Когато възникне
изключение конкрет­ното състояние на програмата се запазва и се търси <b>обработчик
на изключението (exception handler)</b>.</span></p>

<p class=MsoNormal><span lang=BG>Изключенията се предизвикват или <b>&quot;хвърлят&quot;
(throw an exception)</b>.</span></p>

<h3><a name="_Toc218195873"><span lang=BG>Прихващане и обработка на изключения</span></a></h3>

<p class=MsoNormal><b><span lang=BG>Exception handling</span></b><span lang=BG>
(<b>инфраструктура за обработка на изключе­нията</b>) е част от средата – механизъм,
който позволява хвърлянето и прихващането на изключения. Част от тази
инфраструктура са дефини­раните езиковите конструкции за хвърляне и прихващане
на изключения. Тя се грижи и затова изключението да стигне до кода, който може
да го обработи.</span></p>

<h3><a name="_Toc218195874"><span lang=BG>Изключенията в ООП</span></a></h3>

<p class=MsoNormal><span lang=BG>В обектно-ориентираното програмиране (ООП)
изключенията представля­ват мощно средство за <b>централизирана обработ­ка на
грешки</b> и изклю­чителни (необи­чайни) ситуации. Те заместват в голяма степен
проце­дурно-ориенти­рания подход, при който всяка функция връща като резултат
от изпълнението си код на грешка (или неутрална стойност, ако не е настъпила
грешка).</span></p>

<p class=MsoNormal><span lang=BG>В ООП кодът, който извършва дадена операция,
обикновено предизвиква изключение, когато в него възникне проблем и операцията
не може да бъде изпълнена успешно. Методът, който извиква операцията може да
прихване изключението и да обработи грешката или да пропусне изклю­чението и да
остави то да бъде прихванато от извикващият го метод. Така не е задъл­жително
грешките да бъдат обработвани непосредствено от извикващия код, а могат да се
оставят за тези, които са го извикали. Това дава възможност управлението на
грешките и необичайните ситуации да се извършва на много нива.</span></p>

<p class=MsoNormal><span lang=BG>Друга основна концепция при изключенията е
тяхната <b>йерархична същ­ност</b>. Изключенията в ООП са класове и като такива
могат да образуват йерархии посредством наследяване. При прихващането на
изключения може да се обработват наведнъж цял клас от грешки, а не само дадена
определена грешка (както е в процедурното програмиране).</span></p>

<p class=MsoNormal><span lang=BG>В ООП се препоръчва чрез изключения да се
управлява всяко състояние на грешка или неочаквано поведение, възникнало по
време на изпълне­нието на една програма.</span></p>

<p class=MsoNormal><span lang=BG>Кое е очаквано и кое неочаквано събитие е
описано към края на тази глава.</span></p>

<h3><a name="_Toc218195875"><span lang=BG>Изключенията в Java</span></a></h3>

<p class=MsoNormal><b><span lang=BG>Изключение (</span></b><b>e<span lang=BG>xception)</span></b><span
lang=BG> в Java представлява събитие, което уведомява програмиста, че е
възникнало обстоятелство (грешка) непредвидено в нормалния ход на програмата.
Това става като методът, в който е възник­нала грешката изхвърля специален
обект съдържащ информация за вида на грешката, мястото в програмата, където е
възникнала, и състоянието на програмата в момента на възникване на грешката.</span></p>

<p class=MsoNormal><span lang=BG>Всяко изключение в Java носи т.нар <b>stack
trace </b>(няма да се мъчим да го превеждаме) – информация за това къде точно в
кода е възникнала грешката. Ще го дискутираме подробно <a href="#_Stack_Trace_–">малко
по-късно</a>.</span></p>

<h3><a name="_Toc218195876"><span lang=BG>Пример за код, който хвърля
изключения</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Типичен пример за
код, който хвърля изключения е следният метод:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> readFile(String fileName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  FileInputStream fis = </span><b><u><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></u></b><u><span
  lang=BG style='font-family:"Courier New";color:black'>
  FileInputStream(fileName);</span></u></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  BufferedReader in = </span><b><u><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></u></b><u><span
  lang=BG style='font-family:"Courier New";color:black'> BufferedReader(</span></u></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  String tmp = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((tmp = <u>in.readLine()</u>) != </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     System.out.println(tmp);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  <u>in.close();</u></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  <u>fis.close();</u></span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Това е код, който
се опитва да отвори текстов файл и да чете от него</span><span lang=BG> </span><span
lang=BG>ред по ред докато файлът свърши. Повече за работата с файлове ще
научите в главата &quot;<a href="#_Глава_15._Текстови">Текстови файлове</a>&quot;</span>.
<span lang=BG>За момента, нека се съсредо­точим не в класовете и методите за работа
с файлове, в конструкциите за работа с изключения.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Подчертаните
методи и конструктори са тези, в които се хвърлят изключенията. В примера
конструкторът </span><span class=Code><span lang=BG>FileInputStream(fileName</span></span><span
class=Code><span lang=BG>)</span></span><span lang=BG> хвърля </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG>, ако
не съществува файл с име, каквото му се подава. Методите на потоците</span><span
class=Code><span lang=BG> readLine() </span></span><span lang=BG>и </span><span
class=Code><span lang=BG>close()</span></span><span lang=BG>, хвърлят </span><span
class=Code><span lang=BG>IOException</span></span><span lang=BG
style='font-family:"Courier New";color:black'> </span><span lang=BG>ако
възникне неочакван проблем при входно-изходните опе­рации.</span><span lang=BG
style='font-family:"Courier New";color:black'> </span><span lang=BG>Този пример
няма да се компилира (местата, където са грешките от компилация, са
подчертани), защото хвърляните изключения трябва да бъдат прихванати и да бъдат
подходящо обработени.</span></p>

<h3><a name="_Toc218195877"><span lang=BG>Как работят изключенията?</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако по време на
нормалния ход на програмата някой от извикваните методи неочаквано хвърли
изключение, то нормалният ход на програмата се преустановява. Това ще се случи,
ако например възн­икне изклю­чение от типа </span><span class=Code><span
lang=BG>FileNotFoundException </span></span><span lang=BG>при инициал­изиране
на файловия поток от горния пример. Нека разгледаме сления ред:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>new</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> FileInputStream(fileName);</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако се случи
изключение, променливата </span><span class=Code><span lang=BG>fis</span></span><span
lang=BG> няма да бъде инициализи­рана и ще остане със стойност </span><span
class=Code><span lang=BG>null</span></span><span lang=BG>. Нито един от
следващите редове от метода няма да бъде изпълнен. Програмата ще преустанови
своя ход докато виртуалната машина не намери обработчик на възникналото из­ключение
</span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG>.</span></p>

<h2><a name="_Toc218195878"><span lang=BG>Прихващане на изключения в Java</span></a></h2>

<p class=MsoNormal><span lang=BG>След като един метод хвърли изключение,
виртуалната машина търси код, който да го прихване и евентуално обработи. За да
разберем как действа този механизъм ще разгледаме понятието <b>стек </b>на
извикване на методите. Това е същият този стек, в който се записват всички
промен­ливи в програмата, параметрите на методите и стойностните типове.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всяка програма на
Java започва с </span><span class=Code><span lang=BG>main()</span></span><span
lang=BG> метод.  В него може да се извика друг метод да го наречем &quot;Метод
1&quot;, който от своя страна извиква &quot;Метод 2&quot; и т.н., докато се
извика &quot;Метод N&quot;.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Когато &quot;Метод
N&quot; свърши работата си управлението на програмата се връща на предходния и
т. н., докато се стигне до</span><span class=Code><span lang=BG> main() </span></span><span
lang=BG>метода. След като се излезе от него свършва и програмата. Като се
извиква нов метод той се добавя най-отгоре в стека, а като свърши изпълнението
му метода се изважда от стека.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Можем да
визуализираме този процес на извикване на методите един от друг по следния
начин:</span></p>

<p class=MsoNormal align=center style='margin-bottom:6.0pt;text-align:center'><span
lang=BG><img border=0 width=189 height=220
src="image102.gif"></span></p>

<p class=MsoNormal><span lang=BG>Процесът на търсене и прихващане на изключение
е обратният на този за извикване на методи. Започва се от метода, в който е
възникнало изклю</span>­<span lang=BG>чението и се върви в обратна посока
докато се намери метод, където изключението е прихва­нато:</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=BG><img
border=0 width=201 height=219
src="image103.gif"></span></p>

<p class=MsoNormal><span lang=BG>Не всички изключения трябва да се прихващат,
но затова ще стане дума след малко в <a href="#_Видове_изключения_в">частта за
видовете изключения</a>.</span></p>

<h3><a name="_Toc218195879"><span lang=BG>Програмна конструкция try-catch</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>За да прихванем
изключение обгръщаме парчето код, където може да възникне изключение с
програмната конструкция </span><span class=Code><span lang=BG>try-catch</span></span>:</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  Some sode that may </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>throw</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> and exception</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (ExceptionType objectName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Code handling an Exception</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (ExceptionType objectName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Code handling an Exception</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Конструкцията се състои от един </span><span
class=Code><span lang=BG>try</span></span><span lang=BG> блок, обгръщащ валидни
Java конструкции, които могат да хвърлят изключения, следван от един или много </span><span
class=Code><span lang=BG>catch</span></span><span lang=BG> блока, които
обработват различни по тип изключения. В </span><span class=Code><span lang=BG>catch</span></span><span
lang=BG> блокът </span><span class=Code><span lang=BG>ExceptionType</span></span><span
lang=BG> трябва да е тип на клас, който е наследник на класа </span><span
class=Code><span lang=BG>java.lang.Throwable</span></span><span lang=BG>. В
противен случай ще получим проблем при компилация. Изразът в скобите след </span><span
class=Code><span lang=BG>catch</span></span><span lang=BG> играе роля на
декларация на променлива и затова вътре в блока </span><span class=Code><span
lang=BG>catch</span></span><span lang=BG> можем да използваме </span><span
class=Code><span lang=BG>objectName</span></span><span lang=BG>, за да
извикваме методите или да използваме свойствата на изключението.</span></p>

<h3><a name="_Toc218195880"><span lang=BG>Прихващане на изключения – пример</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да направим така,
че горният пример да се компилира. Заграждаме целият проблемен код, където
могат да се хвърлят изключения с </span><span class=Code><span lang=BG>try-catch
</span></span><span lang=BG>блок и добавяме прихващане на двата вида
изключения:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {     </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exceptions could be thrown below</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     BufferedReader in = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     String tmp = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((tmp = in.readLine()) != </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       System.out.println(tmp);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) { </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for FileNotFoundException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// We just inform the client that there is no such file</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>     System.out.println(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;The file \&quot;&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> + fileName </span><span
  style='font-family:"Courier New";color:black'>+</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>       </span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;\&quot; does not exist! Unable to read it.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for IOException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Добре, сега методът
се компилира, но работи по малко по-различен начин. При възникване на </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG> по
време на изпълне­нието на </span><span class=Code><span lang=BG>new
FileInputStream(fileName)</span></span><span lang=BG> виртуалната машина няма
да изпълни следващите редове, а ще се прескочи чак на реда, където изключението
е прихванато с </span><span class=Code><span lang=BG>catch
(FileNotFoundException e)</span></span><span lang=BG> и ще се изпълни блока
след него:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) { </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for FileNotFoundException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// We just inform the client that there is no such file</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>  System.out.println(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;The file \&quot;&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> + fileName +</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;\&quot; does not exist! Unable to read it.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Като обработка на
изключението просто потребителите ще бъдат инфор­мирани, че такъв файл не
съществува. Това се извършва чрез съобщение, изведено на стандартния изход.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Аналогично, ако
възникне изключение от тип </span><span class=Code><span lang=BG>IOException</span></span><span
lang=BG style='font-family:"Courier New";color:black'> </span><span lang=BG>по
време на изпъл­нението на метода </span><span class=Code><span lang=BG>in.readLine()</span></span><span
lang=BG>, то се обработва от блока:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for IOException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Понеже не знаем
естеството на грешката, породила грешно четене, отпе­чатваме цялата информация
за изключението на стандартния изход.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Редовете код между
мястото на възникване на изключението и мястото на прихващане и обработка не се
изпълняват.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Отпечатването на цялата информация от
  изключението (stack trace) на потребителя не винаги е добра практика! Как
  най-правилно се обработват изключения е описано в частта за добри практики.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>С така прихванати
изключения примерът вече се компилира и може да се изпълни посредством </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метод, подобен на
следния:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>main</b>(String[] args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  <i>readFile</i>(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;C:\\tools\\eclipse\\eclipse.ini&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да обединим двата
метода в клас и да се опитаме да го изпълним като подаваме на метода </span><span
class=Code><span lang=BG>readFile()</span></span><span lang=BG> първо
съществуващ, а после и липсващ текстов файл и да видим какво ще получим. Ето го
класът:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  background:#F3F3F3;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  class=Code><span lang=BG>ReadFile</span></span><span style='font-family:"Courier New";
  color:black'>Example</span><span class=Code><span lang=BG>.java</span></span></p>
  </td>
 </tr>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.BufferedReader;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileInputStream;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileNotFoundException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.IOException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.InputStreamReader;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ReadFile</span><span style='font-family:"Courier New";
  color:black'>Example</span><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exceptions could be thrown below</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       BufferedReader in = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>         </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       String </span><span style='font-family:"Courier New";
  color:black'>line</span><span lang=BG style='font-family:"Courier New";
  color:black'> = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((</span><span style='font-family:"Courier New";color:black'>line</span><span
  lang=BG style='font-family:"Courier New";color:black'> = in.readLine()) != </span><b><span
  lang=BG style='font-family:"Courier New";color:#7F0055'>null</span></b><span
  lang=BG style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          System.out.println(</span><span style='font-family:
  "Courier New";color:black'>line</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) { </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for FileNotFoundException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// We just inform the client that there is </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// not such file</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       System.out.println(</span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;The file \&quot;&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> + fileName +</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>         </span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;\&quot; does not exist! Unable to read it.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Exception handler for IOException</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>main</b>(String[] args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     <i>readFile</i>(</span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;C:\\tools\\eclipse\\eclipse.ini&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако в </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метода подадем път
до съществуващ текстов файл то съдържанието му ще бъде отпечатано на екрана. От
друга страна, ако файлът е несъществуващ, то програмата дори няма да направи
опит да го чете, а ще изведе съобщение за грешка от типа:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left'><span
  class=Code><span lang=BG style='font-weight:normal'>The file &quot;C:\tools\eclipse\eclipse.ini&quot;
  does not exist! Unable to read it.</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Ако възникне грешка при самото четене на файла
ще получим пълния stack trace на изключението.</span></p>

<h3><a name="_Toc218195881"></a><a name="_Stack_Trace_–"></a><span lang=BG>Stack
Trace</span></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Информацията,
която носи т. нар. <b>Stack trace</b>, съдържа подробно описа­ние на естеството
на изключе­нието и за мястото в програмата, където то е възникнало. Stack trace
се използва, за да се намерят причините за въз­никването на изключението и
последващото им отстраняване (довеждане до нормалното изпълнение на програмата).
Stack trace съдържа голямо количество инфор­мация и е предназначен за
анализиране само от програ­мистите и админи­страторите, но не и от крайните
потребители на програ­мата, които не са длъжни да са технически лица. Stack
trace е стандартно средство за търсене и отстраняване (дебъгване) на проблеми.</span></p>

<h3><a name="_Toc218195882"><span lang=BG>Stack Trace – пример</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ето как изглежда
stack trace на изключение за липсващ файл от примера по-горе. Подали сме
несъществуващ файл </span><span class=Code><span lang=BG>C:\missingFile.txt</span></span><span
lang=BG> и вместо да изведем съобщението сме използвали метода </span><span
class=Code><span lang=BG>e.printStackTrace()</span></span><span lang=BG>.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><u><span lang=BG style='font-family:"Courier New";
  color:navy'>java.io.FileNotFoundException</span></u><span lang=BG
  style='font-family:"Courier New";color:red'>: C:\missingFile.txt (The system
  cannot find the file specified)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at java.io.FileInputStream.open(</span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>Native Method</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at java.io.FileInputStream.&lt;init&gt;(Unknown Source)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at java.io.FileInputStream.&lt;init&gt;(Unknown Source)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at ReadFile.readFile(</span><u><span lang=BG style='font-family:
  "Courier New";color:navy'>ReadFile.java:12</span></u><span lang=BG
  style='font-family:"Courier New";color:red'>)</span></p>
  <p class=MsoNormal><span lang=BG style='font-family:"Courier New";color:red'>  at
  ReadFile.main(</span><u><span lang=BG style='font-family:"Courier New";
  color:navy'>ReadFile.java:35</span></u><span lang=BG style='font-family:"Courier New";
  color:red'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Системата не може
да намери този файл и затова хвърля изключението </span><span class=Code><span
lang=BG>FileNotFoundException</span></span><span lang=BG>.</span></p>

<h3><a name="_Toc218195883"><span lang=BG>Как да разчетем &quot;Stack Trace&quot;?</span></a></h3>

<p class=MsoNormal><span lang=BG>За да се ориентираме в един </span>s<span
lang=BG>tack </span>t<span lang=BG>race трябва да можем да го разчетем правилно
и да знаем неговата структура.</span></p>

<p class=MsoNormal><span lang=BG>Stack trace съдържа следната информация в себе
си:</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>пълното име на класа на изключението;</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>съобщение – информация за естеството на грешката;</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>информация за стека на извикване на методите</span>.</p>

<p class=MsoNormal><span lang=BG>От примера по-горе пълното име на изключението
е </span><span class=Code><span lang=BG>java.io. FileNotFoundException</span></span><span
lang=BG>. Следва съобщението за грешка. То донякъде повтаря името на самото
изключение: &quot;</span><span class=Code><span lang=BG>C:\missingFile.txt (The
system cannot find the file specified)</span></span><span lang=BG>&quot;.
Следва целият стек на извик­ване на методите. Стека най-често е най-голямата
част от stack trace.</span></p>

<p class=MsoNormal><span lang=BG>Всички методи от стека на извикванията са
показани на отделен ред. Най-отгоре е методът, който първоначално е хвърлил
изключение, а най-отдолу е </span><span class=Code><span lang=BG>main()</span></span><span
lang=BG> методът. Всеки метод се дава заедно с класа, който го съдържа и в
скоби реда от файла, където е хвърлено изключението, примерно </span><span
class=Code><span lang=BG>ReadFile.readFile(ReadFile.java:12)</span></span><span
lang=BG>. Редовете са налични само ако класът е компилиран с опция да включва
дебъг информация (номерата на редовете и т.н.).</span></p>

<p class=MsoNormal><span lang=BG>Ако методът е конструктор, то вместо името му
се използва </span><span class=Code><span lang=BG>&lt;init&gt; java.io.FileInputStream.&lt;init&gt;(Unknown
Source)</span></span><span lang=BG>. Ако липсва информа­ция за номера на реда,
където е възникнало изключението се изписва </span><span class=Code><span
lang=BG>Unknown Source</span></span><span lang=BG>. Ако методът е </span><span
class=Code><span lang=BG>native</span></span><span lang=BG> (външен за Java
виртуалната машина), се изписва </span><span class=Code><span lang=BG>Native
Method</span></span><span lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>Това позволява бързо и лесно да се намери
класа, метода и дори реда, където е възникнала грешката, да се анализира
нейното естество и да се поправи.</span></p>

<h2><a name="_Toc218195884"><span lang=BG>Хвърляне на изключения (конструкцията
throw)</span></a></h2>

<p class=MsoNormal><span lang=BG>Изключения се хвърлят с ключовата дума </span><span
class=Code><span lang=BG>throw</span></span>, <span lang=BG>като първо се
създава инстан­ция на изключението и се попълва нужната информация за него.
Могат да се хвърлят само класове наследници на </span><span class=Code><span
lang=BG>java.lang.Throwable</span></span><span lang=BG>.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ето един пример:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> main(String... args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  RuntimeException exception =</span><span lang=BG
  style='font-family:"Courier New";color:black'> </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> RuntimeException(</span><span
  lang=BG style='font-family:"Courier New";color:#2A00FF'>&quot;</span><span
  style='font-family:"Courier New";color:#2A00FF'>Problem</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throw</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> exception;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Резултатът от
изпълнението на програмата е следният:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>Exception in thread &quot;main&quot; </span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>java.lang.RuntimeException</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>: </span><span
  style='font-family:"Courier New";color:red'>Problem</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at introjavabook.Program.main(</span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>Program.java:10</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>)</span></p>
  </td>
 </tr>
</table>

<h2><a name="_Toc218195885"></a><a name="_Видове_изключения_в"></a><span
lang=BG>Видове изключения в Java</span></h2>

<p class=MsoNormal><span lang=BG>В Java</span><span lang=BG> </span><span
lang=BG>има 3 вида изключения: проверени (checked), непроверени (unchecked) и
грешки (errors). Когато ги разглеждаме, ще използваме най-вече оригиналните английски
термини, защото </span>те<span lang=BG> са трудно преводими.</span></p>

<p class=MsoNormal><span lang=BG>В настоящата секция ще се нуждаем от понятия
като наследяване, йерархия от класове, базов клас и други, които не сме
обяснили до момента. Ако се затруднявате с някой от тях, може да погледнете
съответ­ните дефиниции в главата &quot;<a href="#_Глава_20._Принципи">Принципи
на обектно-ориентираното програ­миране</a>&quot;.</span></p>

<h3><a name="_Toc218195886"><span lang=BG>Принципът &quot;хвани или изхвърли&quot;</span></a></h3>

<p class=MsoNormal><span lang=BG>Принципът &quot;хвани или изхвърли&quot; важи
за изключенията, които задължи­телно трябва да се обработят. Те или трябва да
бъдат прихванати, или изхвърлени от метода, в който са възникнали, или от някой
от следващите методи от стека на извикванията.</span></p>

<p class=MsoNormal><span lang=BG>За изключенията, които <b>трябва</b> да бъдат
обработени, има два варианта:</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Изключението да бъде обработено <b>(хвани)</b>:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> openFile(String fileName) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// ...</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// ...</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Отговорността за изключението да бъде оставена на
друг <b>(изхвърли)</b>, като той бъде задължен да обработи това изключение или
да задължи някой друг:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> openFile(String fileName)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileNotFoundException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><a name="_Checked_exceptions"></a><span lang=BG>Изключението
или се обработва на място или се обявява като изхвърляно от метода, в който
възниква (или хвани или изхвърли). По този начин методът прехвърля отговор­ността
за обработката на даден тип изключе­ния на извикващия метод.</span></p>

<h3><a name="_Toc218195887"><span lang=BG>Checked exceptions</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Checked (проверени)
са изключения, които <b>задължително</b> <b>трябва</b> да спазват принципа &quot;хвани
или изхвърли&quot; и това се гарантира от компила­тора. Тези изключения
наследяват класа </span><span class=Code><span lang=BG>java.lang.Exception</span></span><span
lang=BG>, но не наследяват </span><span class=Code><span lang=BG>java.lang.RuntimeException</span></span><span
lang=BG>.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Checked са
изключения, които една добре написана програма трябва да очаква и би трябвало
да може да се възстанови от тях.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Например програма,
която чете данни от сървър с бази от данни. Ако кабелът до сървъра в дадения
момент бъде прекъснат, програмата ще получи </span><span class=Code><span
lang=BG>ConnectException</span></span><span lang=BG> и може да съобщи на
потребителя да опита отново или да му обясни, че в момента може да използва
само други части на програмата.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Checked
изключенията или трябва да бъдат прихванати и обработени или трябва да бъдат
изхвърляни изрично чрез </span><span class=Code><span lang=BG>throws</span></span><span
lang=BG> декларация в съответ­ния метод. Ако нито едно от двете не е направено,
компилаторът ще даде съобщение за грешка.</span></p>

<h3><a name="_Toc218195888"></a><a name="_Грешки_(Errors)"></a><span lang=BG>Грешки
(Errors)</span></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Грешките (errors)
са критични ситуации (fatal errors), при които изпълне­нието на програмата
обикновено не може да се възстанови и трябва принудително да завърши. Пример за
такава грешка е </span><span class=Code><span lang=BG>java.lang. OutOfMemoryError</span></span><span
lang=BG>. Когато паметта свърши, програмата обикно­вено няма какво да направи и
трябва принудително да запише състояни­ето си (за да няма загуба на данни) и да
завърши.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Грешките не
спазват принципа &quot;хвани или изхвърли&quot;. Не се очаква да ги
обработваме, въпреки че е възможно.</span></p>

<h3><a name="_Toc218195889"></a><a name="_Unchecked_exceptions"></a><span
lang=BG>Unchecked exceptions</span></h3>

<p class=MsoNormal><span lang=BG>Unchecked (непроверени) изключения, са
изключения, които не са задъл­жени да спазват принципа &quot;хвани или изхвърли&quot;.
Тези изключения наследяват класа </span><span class=Code><span lang=BG>RuntimeException</span></span><span
lang=BG>. Възникването на такова изключение най-често означава бъг в програмата
или неправилна употреба на някоя библиотека.</span></p>

<p class=MsoNormal><span lang=BG>Вероятно сте се сблъсквали с грешката </span><span
class=Code><span lang=BG>NullPointerException</span></span><span lang=BG>. Тя е
типичен представител на unchecked изключенията. Може да възникне по невнимание,
когато се обърнем към обект, който няма стойност. Прихва­щането и обработването
на такива проблеми не е задължително, но е възможно.</span></p>

<h2><a name="_Toc218195890"><span lang=BG>Йерархия на изключенията</span></a></h2>

<p class=MsoNormal><span lang=BG>Изключенията са класове, които образуват
йерархия от наследници:</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=BG><img
border=0 width=464 height=231
src="image104.gif"></span></p>

<p class=MsoNormal><span lang=BG>Тъй като наследниците на всеки от тези класове
имат различни характе­ристики, ще разгледаме всеки от тях по отделно.</span></p>

<h3><a name="_Toc218195891"><span lang=BG>Throwable</span></a></h3>

<p class=MsoNormal><span lang=BG>Класът </span><span class=Code><span lang=BG>java.lang.Throwable</span></span><span
lang=BG> е базовият клас на всички грешки и изклю­чения в Java. Само този клас
или негови наследници могат да се хвърлят от <b>JVM (Java Virtual Machine –
виртуалната машина на Java</b>) или могат да бъдат хвърляни чрез </span><span
class=Code><span lang=BG>throw</span></span><span lang=BG> оператора. Само този
клас или негови наследници могат да бъдат аргументи на </span><span class=Code><span
lang=BG>catch</span></span><span lang=BG> клаузата.</span></p>

<h4><span lang=BG>Throwable – характеристики</span></h4>

<p class=MsoNormal><span lang=BG>Throwable съдържа копие на стека по време на
създаването на изключе­нието. Съдържа още текстово съобщение описващо грешката
(попълва се от кода, който хвърля изключението или някой наследяващ клас). Всяко
изключение може да съдържа още <b>причина (cause)</b> за възникването му – друго
изключение, което е причина за появата на проблема. Можем да го наричаме <b>вътрешно
/ обвито изключение</b> (<b>inner / wrapped exception</b>) или <b>вложено
изключение</b>.</span></p>

<p class=MsoNormal><span lang=BG>Външното изключение се нарича <b>обгръщащо / обвиващо
изключение</b>. Така може да се навържат много изключения. В този случай
говорим за <b>верига от изключения (exception chain)</b>.</span></p>

<h4><span lang=BG>Обвити изключения – защо ги има?</span></h4>

<p class=MsoNormal><span lang=BG>Защо се налага едно изключение да инициира
друго?</span></p>

<p class=MsoNormal><span lang=BG>Добра практика е всеки модул / компонент / програма
да дефинира малък брой <b>application exception</b></span><b>s</b><span
lang=BG> (изключения написани от автора на модула</span><span lang=BG> </span><span
lang=BG>/</span><span lang=BG> </span><span lang=BG>програмата) и този
компонент да се ограничава само до тях, а не да хвърля стандартни изключения
(от Java API), наричани още <b>системни изключения (system exceptions)</b>.
Така ползвателят на този модул / компонент знае какви изключения могат да възникнат
в него и няма нужда да се занимава с технически подробности.</span></p>

<p class=MsoNormal><span lang=BG>Например един модул, който се занимава с
олихвяването в една банка би трябвало да хвърля изключения само от неговата
бизнес област, примерно </span><span class=Code><span lang=BG>InterestCalculationException</span></span><span
lang=BG> и </span><span class=Code><span lang=BG>InvalidPeriodException</span></span><span
lang=BG>, но не и изключения като </span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG>, </span><span class=Code><span lang=BG>DivideByZeroException</span></span><span
lang=BG> и </span><span class=Code><span lang=BG>NullPointerException</span></span><span
lang=BG>. При възникване на някое изключение, което не е свързано директно с
проблемите на олихвяването, то се обвива в друго изключение от тип </span><span
class=Code><span lang=BG>InterestCalculationException</span></span><span
lang=BG> и така извикващия метод получава информация, че олихвяването не е
успешно, а като детайли за неуспеха може да разгледа оригиналното изключение,
причи­нител на проблема.</span></p>

<p class=MsoNormal><span lang=BG>Тези application exceptions от бизнес областта
на решавания проблем, за които дадохме пример, обаче не съдържат достатъчно
информация за възникналата грешка, за да бъде тя поправена. Затова е добра
практика в тях да има и техническа информация за оригиналния причинител на
проблема, която е много полезна за дебъгване например.</span></p>

<p class=MsoNormal><span lang=BG>Същото обяснение от друга гледна точка: един
компонент </span>A<span lang=BG> има дефини­рани малък брой изключения (</span>A<span
lang=BG>-изключения). Този компонент използва друг компонент Б. Ако Б хвърли
Б-изключение, то </span>A<span lang=BG> не може да си свърши работата и също
трябва да хвърли изключение, но не може да хвърли Б-изключение, затова хвърля
А-изключение, съдържащо изключението Б като вложено изключение.</span></p>

<p class=MsoNormal><span lang=BG>Защо </span>A<span lang=BG> не може да хвърли
Б-изключение? Има много причини:</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG style='font-family:"Arial","sans-serif"'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Ползвателите на </span>A<span lang=BG> не трябва да
знаят за съществуването на Б (за повече информация разгледайте <a
href="#_Абстракция_(Abstraction)">точката за абстракция от главата за
принципите на ООП</a>).</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG style='font-family:"Arial","sans-serif"'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Компонентът </span>A<span lang=BG> не е дефинирал,
че ще хвърля Б-изключения.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG style='font-family:"Arial","sans-serif"'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Ползвателите на </span>A<span lang=BG> не са
подготвени за Б-изключения. Те очакват само А-изключения.</span></p>

<p class=MsoNormal><span lang=BG>Още една причина ще обясним в <a
href="#_Декларацията_throws_за">секцията за <span style='font-family:"Courier New"'>throws</span></a>.</span></p>

<h4><span lang=BG>Throwable – методи</span></h4>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ето най-основните методи
на изключенията (класът </span><span class=Code><span lang=BG>Throwable</span></span><span
lang=BG>):</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>implements</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Serializable {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable(String message) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable(Throwable cause) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable(String message, Throwable cause) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> String getMessage() {...}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable getCause() {...}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> printStackTrace() {...}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> StackTraceElement[] getStackTrace() {...}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>synchronized</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Throwable initCause(Throwable cause) {</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Нека обясним накратко тези методи:</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
class=Code><span lang=BG style='font-family:"Verdana","sans-serif";font-weight:
normal'>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span
lang=BG>Имаме четири конструктора с различните комбинации за съобщение и обвито
изключение.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Методът </span><span class=Code><span lang=BG>getMessage()</span></span><span
lang=BG> връща текстово описание на изключението. Ако изключе­нието е </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG>, то
описанието може да казва кой точно файл не е намерен. Всяко изключение само
решава какво съобщение да върне. Най-често се позволява на хвърлящият
изключението да сложи това описание.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Методът </span><span class=Code><span lang=BG>getCause()</span></span><span
lang=BG> връща вътрешното / обвитото изключение.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Методът </span><b><span lang=BG style='font-family:"Courier New";
color:black'>printStackTrace()</span></b><span lang=BG> отпечатва класът на
изключението, съобщението и стека на грешката и стека на цялата верига от извикани
методи, заедно с цялата верига на вложени едно в друго изключения.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Методът </span><span class=Code><span lang=BG>getStackTrace()</span></span><span
lang=BG> връща целия стек, който се пази в изключението. Съществува от Java
версия 1.4.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Методът </span><span class=Code><span lang=BG>initCause()</span></span><span
lang=BG> метод използван преди Java 1.4 за задаване на вътреш­ното / обвитото
изключение. Сега се използват конструкто­рите, но този метод също продължава да
работи.</span></p>

<h4><span lang=BG>Вериги изключения – частта Caused by</span></h4>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Сега ще видим как
се изписва на екрана вложено изключение. Нека имаме следния код:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>package</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> introjavabook;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ExceptionProgram {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> main(String... args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throw</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> NullPointerException(</span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;Problem&quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (NullPointerException npe) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throw</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> RuntimeException(npe);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>В този пример
хвърляме едно изключение, след това го хващаме и хвърляме друго изключение,
което обвива първото. Резултатът от изпъл­нението този код е:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>Exception in thread &quot;main&quot; </span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>RuntimeEx</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>: </span><u><span
  lang=BG style='font-family:"Courier New";color:navy'>NullPointerEx</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>: </span><span
  style='font-family:"Courier New";color:red'>Problem</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>  at ExceptionProgram.main(</span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>ExceptionProgram.java:13</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:red'>Caused by: </span><u><span lang=BG style='font-family:"Courier New";
  color:navy'>java.lang.NullPointerException</span></u><span lang=BG
  style='font-family:"Courier New";color:red'>: </span><span style='font-family:
  "Courier New";color:red'>Problem</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:red'>  at ExceptionProgram.main(</span><u><span lang=BG
  style='font-family:"Courier New";color:navy'>ExceptionProgram.java:11</span></u><span
  lang=BG style='font-family:"Courier New";color:red'>)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>На места са съкратени имената, за да се
събират на един ред.</span><span lang=BG> </span><span lang=BG>Появява се
секция &quot;Caused by&quot;, която описва вложеното изключение. Това ни дава
полезна информация за това как се е стигнало до хвърлянето на изключе­нието,
което разглеждаме.</span></p>

<h3><a name="_Toc218195892"><span lang=BG>Как да разчетем &quot;съкратен&quot;
Stack Trace?</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Понякога
получаваме изключение като това:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>HighLevelException:
  MidLevelException: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.a(Junk.java:14)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.main(Junk.java:4)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>Caused
  by: MidLevelException: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.c(Junk.java:24)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.b(Junk.java:18)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.a(Junk.java:12)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    ... 1 more</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>Caused
  by: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.e(Junk.java:31)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.d(Junk.java:28)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.c(Junk.java:22)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    ... 3 more</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Какво означава
частта &quot;</span><span class=Code><span lang=BG>... 3 more</span></span><span
lang=BG>&quot;? Тя означава, че за краткост при отпечатването на грешката някои
подробности за нея са били съкратени, тъй като са очевидни. В случая се
пропускат повтарящите се редове. Ето пълната версия на същия &quot;</span>s<span
lang=BG>tack </span>t<span lang=BG>race&quot;:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>HighLevelException:
  MidLevelException: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.a(Junk.java:14)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.main(Junk.java:4)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>Caused
  by: MidLevelException: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.c(Junk.java:24)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.b(Junk.java:18)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.a(Junk.java:12)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    ... 1 more = (последния</span></span><span
  class=Code>т</span><span class=Code><span lang=BG> един ред от горния стек)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>=&gt; at
  Junk.main(Junk.java:4)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>&nbsp;</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>Caused
  by: LowLevelException</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.e(Junk.java:31)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.d(Junk.java:28)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG style='font-weight:normal'>   
  at Junk.c(Junk.java:22)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    ... 3 more =
  (последните три реда от горния стек)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>=&gt;  at Junk.b(Junk.java:18)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    at
  Junk.a(Junk.java:12)</span></span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>    at
  Junk.main(Junk.java:4) (взето от най-горния)</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Съкращаването на повтарящи се редове &quot;компресира&quot;
изключенията – прави ги по-кратки. Това обикновено е полезно и затова се
извършва автоматично при отпечатване.</span></p>

<h3><a name="_Toc218195893"><span lang=BG>Error</span></a></h3>

<p class=MsoNormal><span lang=BG>Изключенията от тип </span><span class=Code><span
lang=BG>Error</span></span><span lang=BG> и неговите наследници индикират за
сериозен проблем (<a href="#_Грешки_(Errors)">неочаквани грешки</a>). Използват
се при възникване на грешки – такива, от които програмата не може да се
възстанови и не се очаква те да бъдат хващани. Всички такива грешки наследяват
класа </span><span class=Code><span lang=BG>Error</span></span><span lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>Тъй като класа Error наследява Throwable, той
притежава всички негови свойства: носи в себе си stack trace и съобщение за
грешка, съдържа методите </span><span class=Code><span lang=BG>getMessage()</span></span><span
lang=BG>, </span><span class=Code><span lang=BG>printStackTrace()</span></span><span
lang=BG> и </span><span class=Code><span lang=BG>getStackTrace()</span></span><span
lang=BG> и може да съдържа вложено изключение, достъпно с </span><span
class=Code><span lang=BG>getCause()</span></span><span lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>Пример за такова изключение е </span><span
class=Code><span lang=BG>OutOfMemoryError</span></span>, <span lang=BG>което
възниква при заделяне на памет, когато не може да бъде отделено достатъчно
място за новосъздаващия се обект.</span></p>

<h3><a name="_Toc218195894"><span lang=BG>Exception</span></a></h3>

<p class=MsoNormal><span lang=BG>Това са т. нар <a href="#_Checked_exceptions">checked
изключения</a>. Те наследяват класа </span><span class=Code><span lang=BG>Exception</span></span><span
lang=BG>, който от своя страна наследява </span><span class=Code><span lang=BG>Throwable</span></span><span
lang=BG>. По този начин всички checked изключения имат stack trace, могат да
съдържат други изключения и въобще имат всички методи и свойства на </span><span
class=Code><span lang=BG>Throwable</span></span><span lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>Такива изключения или трябва да се прихващат
или да се изхвърлят (хвани или изхвърли).</span></p>

<p class=MsoNormal><span lang=BG>Пример за такова изключение е </span><span
class=Code><span lang=BG>IOException</span></span><span lang=BG>, което
възниква при проблем по време на работа с входно-изходни операции. Това
изключение задъл­жително трябва да се хване или да се изхвърли.</span></p>

<h3><a name="_Toc218195895"><span lang=BG>RuntimeException</span></a></h3>

<p class=MsoNormal><span lang=BG>Това са т. нар <a href="#_Unchecked_exceptions">unchecked
изключения</a>. Те наследяват </span><span class=Code><span lang=BG>RuntimeException</span></span>,
<span lang=BG>който от своя страна наследява </span><span class=Code><span
lang=BG>Exception</span></span><span lang=BG>, а той наследява </span><span
class=Code><span lang=BG>Throwable</span></span><span lang=BG>. Следователно
unchecked изключенията също имат всички свойства и методи от класа </span><span
class=Code><span lang=BG>Throwable</span></span><span lang=BG> (stack trace,
message, caus</span>e<span lang=BG> и др.). Прихва­щането на тези изключения не
е задължително.</span></p>

<h2><a name="_Toc218195896"></a><a name="_Декларацията_throws_за"></a><span
lang=BG>Декларацията throws за методи</span></h2>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Досега разгледахме
програмни конструкции за прихващане на изклю­чения в рамките на даден метод, но
понякога е подходящо изключенията да бъдат изхвърлени от метода и отговорност
за тяхната обработка да поеме извикващият метод. За да се постигне това, не
трябва да прихва­щаме изключенията, а просто да декларираме те да се пропуснат
към предишния метод в стека. Това става посредством добавка в сигнатурата на
метода. Изброяваме всички изключения, които искаме да се пропуснат в списък с
разделител запетая, започващ с ключовата дума </span><span class=Code><span
lang=BG>throws</span></span><span lang=BG>. Спи­съкът се намира в края на
сигнатурата на метода след списъка с парамет­рите и преди отварящата фигурна
скоба:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileNotFoundException, IOException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Това е примерен
метод, които изхвърля два типа изключения - </span><span class=Code><span
lang=BG>FileNotFoundException</span></span><span lang=BG> и </span><span
class=Code><span lang=BG>IOException</span></span><span lang=BG>. В случая </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG> е
излишно обявен, тъй като е наследник на </span><span class=Code><span lang=BG>IOException</span></span><span
lang=BG>. Понякога този запис се предпочита заради по-добрата четимост на кода.
За по-добра четимост на кода понякога се декларират за изхвърляне от метода
дори </span><span class=Code><span lang=BG>Runtime</span></span><span lang=BG>
изключения, въпреки че това не се изисква от компилатора.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да се върнем на първоначалния
ни пример. Единственото, което прибавяме, за да се компилира методът, е
декларацията </span><span class=Code><span lang=BG>throws
FileNotFoundException, IOException</span></span><span lang=BG>.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><u><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></u></b><u><span lang=BG style='font-family:"Courier New";
  color:black'> FileNotFoundException, IOException</span></u><span lang=BG
  style='font-family:"Courier New";color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  BufferedReader in = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>new</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  String tmp = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((tmp = in.readLine()) != </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     System.out.println(tmp);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Изхвърлянето на изключения към предходния
метод обикновено означава, че изключенията трябва да се прихванат и обработят
там. Най-правилното място да се обработи дадено изключение е там, където се
изпълнява бизнес операцията, която е била прекъсната поради някакъв проблем.
Това е сложно за обяснение, но по принцип не трябва да прихващаме изключения,
които не можем да обработим адекватно. В такива случаи е по-добре да ги
декларираме с </span><span class=Code><span lang=BG>throws</span></span><span
lang=BG> </span><span lang=BG>и да не се занимаваме с тях.</span></p>

<p class=MsoNormal><span lang=BG>Във визуалните (GUI) приложения грешката
трябва да се покаже на потреби­теля под формата на диалогов прозорец съдържащ опи­сание,
съобразено с познанията на потребителите. В конзолните приложения обикновено
грешката се изписва на конзолата. При уеб приложения грешката се визуализира
като червен текст в началото на страницата или след полето, за което се отнася.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Има едно
универсално правило за обработката на изключенията:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Един метод трябва да обработва само
  изключенията, за които е компетентен, които очаква и за които има знания как
  да ги обработи. Останалите трябва да ги изхвърля към извикващия метод.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Ако изключенията се предават по гореописания
начин от метод на метод и не се прихванат никъде, те неминуемо ще достигнат до
началния метод от програмата – </span><span class=Code><span lang=BG>main()</span></span><span
lang=BG> метода – и ако и той не ги прихване, виртуалната машина ще ги отпечата
на конзолата (ако има конзола) и ще преустанови изпълнението на програмата.</span></p>

<h3><a name="_Toc218195897"><span lang=BG>Обвити изключения – защо ги има?</span></a></h3>

<p class=MsoNormal><span lang=BG>Нека компонентът А хвърля checked изключения –
А-изключения. Той използва функционалност на компонента Б. Компонентът Б хвърля
Б-изключения, които също са checked. Тогава, ако в метод на Б възникне
Б-изключение, то методът на А, който ползва този метод, не може да хвърли
Б-изключение. Това, което може да направи, е или</span><span lang=BG> </span><span
lang=BG>да обработи изклю­чението, или да го обвие в </span><span class=Code><span
lang=BG>RuntimeException</span></span><span lang=BG> или да го обвие в
А-изключение. Най-препоръчителна е практиката Б-изключението да бъде обвито в
A-изключение. Това е още една</span><span lang=BG> </span><span lang=BG>причина,
поради която съще­ству­ват обвитите изключения (nested exceptions).</span></p>

<h3><a name="_Toc218195898"><span lang=BG>Изхвърляне на изключения от main()
метода – пример</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Изхвърлянето на
изключения от </span><span class=Code><span lang=BG>main()</span></span><span
lang=BG> метода по принцип не е жела­телно и до версия 1.4 на JDK не е
позволено. Желателно е всички изклю­чения да бъдат прихванати и обработени. От
версия Java 5 изхвърлянето на изключения от </span><span class=Code><span
lang=BG>main()</span></span><span lang=BG> метода е възможно, както от всеки
друг метод:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>main</b>(String a[]) </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileNotFoundException, IOException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  <i>readFile</i>(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;C:\\tools\\eclipse\\eclipse.ini&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal><span lang=BG style='font-family:"Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Всички изключения изхвърлени от </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метода се прихващат
от самата виртуална машина и се обработват по един и същ начин – пълният </span>s<span
lang=BG>tack </span>t<span lang=BG>race на изключението се изписва в
стандартния изход за грешки (</span><span class=Code><span lang=BG>System.err</span></span><span
lang=BG>). Такова изхвърляне на изключенията, възникващи в </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метода е много
удобно, когато пишем кратка програмка набързо и не искаме да обработваме
евентуално възникващите изключения.</span></p>

<h3><a name="_Toc218195899"><span lang=BG>Прихващане на изключения на нива –
пример</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Възможността за
пропускане на изключения през даден метод ни позво­лява да разгледаме един
по-сложен пример. Прихващане на изклю­чения на нива. Прихващането на нива е
комбинация от прихващането на опре­делени изключения в едни методи и пропускане
на други изключения към предходните методи (нива) в стека. В примера изключенията
възник­ващи в метода </span><span class=Code><span lang=BG>readFile()</span></span><span
lang=BG> се прихващат на две нива</span>:</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>main</b>(String[] args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     <i>readFile</i>(</span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;C:\\tools\\eclipse\\eclipse.ini&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>throws</span></b><span
  lang=BG style='font-family:"Courier New";color:black'> IOException{</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     FileInputStreamfis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     BufferedReader in = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     String tmp = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((tmp = in.readLine()) != </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       System.out.println(tmp);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) {</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>     System.out.println(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;The file \&quot;&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> + fileName </span><span
  style='font-family:"Courier New";color:black'>+</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>       </span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;\&quot; does not exist! Unable to read it.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Първото ниво на
прихващане е в метода </span><span class=Code><span lang=BG>readFile()</span></span><span
lang=BG> а второто ниво е в </span><span class=Code><span lang=BG>main()</span></span><span
lang=BG> метода. Методът </span><span class=Code><span lang=BG>readFile()</span></span><span
lang=BG> прихваща само изключенията</span><span lang=BG> </span><span lang=BG>от
тип </span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG>, а пропуска всички останали </span><span class=Code><span lang=BG>IOException</span></span><span
lang=BG style='font-family:"Courier New";color:black'> </span><span lang=BG>изклю­чения
към </span><span class=Code><span lang=BG>main()</span></span><span lang=BG>
метода където те биват прихванати и обработени.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метода подаде име
на несъществуващ файл то ще възникне </span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG style='font-family:"Courier New";color:black'> </span><span lang=BG>което
ще се прихване в </span><span class=Code><span lang=BG>readFile()</span></span><span
lang=BG>. Ако обаче се подаде име на съществуващ файл и възникне грешка при
самото четене на файла то изключението ще се прихване в </span><span
class=Code><span lang=BG>main()</span></span><span lang=BG> метода.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Прихващането на
изключения на нива позволява отделните изключения да се обработват на
най-подходящото място.</span></p>

<h2><a name="_Toc218195900"><span lang=BG>Конструкцията try-finally</span></a></h2>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всеки блок </span><span
class=Code><span lang=BG>try</span></span><span lang=BG> може да съдържа блок </span><span
class=Code><span lang=BG>finally</span></span><span lang=BG>. Блока </span><span
class=Code><span lang=BG>finally</span></span><span lang=BG> се изпълнява <b>винаги</b>
при излизане от </span><span class=Code><span lang=BG>try</span></span><span
lang=BG> блока, независимо как се излиза от </span><span class=Code><span
lang=BG>try</span></span><span lang=BG> блока. Това гарантира изпълнението на </span><span
class=Code><span lang=BG>finally</span></span><span lang=BG> блока дори ако
възникне неочаквано изключение или се излезе с израз </span><span class=Code><span
lang=BG>return</span></span><span lang=BG>.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Блокът </span><span class=Code><span
  lang=BG>finally</span></span><span lang=BG> няма да се изпълни, ако по време
  на изпълнението на блока </span><span class=Code><span lang=BG>try</span></span><span
  lang=BG> виртуалната машина прекрати изпълнението си!</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Блокът </span><span
class=Code><span lang=BG>finally</span></span><span lang=BG> има следната
основна форма:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span style='font-family:"Courier New";color:black'>Some
  code that could or could not cause an exception</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Code here will allways execute</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всеки </span><span
class=Code><span lang=BG>try</span></span><span lang=BG> блок може да има един
единствен блок </span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> освен блоковете </span><span class=Code><span lang=BG>catch</span></span><span
lang=BG>. Възможна е и комбинация с множество </span><span class=Code><span
lang=BG>catch</span></span><span lang=BG> блокове и един </span><span
class=Code><span lang=BG>finally</span></span><span lang=BG> блок.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span style='font-family:"Courier New";color:black'>some
  code</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (<i>...</i>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>C</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>ode handling an </span><span
  style='font-family:"Courier New";color:#006600'>e</span><span lang=BG
  style='font-family:"Courier New";color:#006600'>xception</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (<i>...</i>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>C</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>ode handling an</span><span
  style='font-family:"Courier New";color:#006600'>other</span><span
  style='font-family:"Courier New";color:#006600'> </span><span
  style='font-family:"Courier New";color:#006600'>e</span><span lang=BG
  style='font-family:"Courier New";color:#006600'>xception</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'> finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>This
  c</span><span lang=BG style='font-family:"Courier New";color:#006600'>ode
  will allways execute</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>В случай на нужда
от освобождаване на вече заети ресурси блока </span><span class=Code><span
lang=BG>finally</span></span><span lang=BG> е незаменим. Ако го нямаше</span>,<span
lang=BG> никога не бихме били сигурни дали разчист­ването няма случайно да се
прескочи при неочаквано изключение или заради използването на </span><span
class=Code><span lang=BG>return</span></span><span lang=BG>, </span><span
class=Code><span lang=BG>continue</span></span><span lang=BG>, или </span><span
class=Code><span lang=BG>break </span></span><span lang=BG>изрази.</span></p>

<h3><a name="_Toc218195901"><span lang=BG>Дефиниране на проблема</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>В примера, който
разглеждаме има два потока, които задължително трябва да се затворят.
Най-правилният начин това да се направи е с </span><span class=Code><span
lang=BG>try- finally</span></span><span lang=BG> блок обграждащ редовете,
където се използват съответните потоци. Да си припомним примера:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName)</span><span lang=BG
  style='font-family:"Courier New";color:black'> </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>throws</span></b><span
  lang=BG style='font-family:"Courier New";color:black'> IOException{</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  BufferedReader in = </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> BufferedReader(</span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing </span><span
  style='font-family:"Courier New";color:#006600'>the </span><span lang=BG
  style='font-family:"Courier New";color:#006600'>streams</span><span
  style='font-family:"Courier New";color:#006600'> here …</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis.close();  </span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Отварят се два
потока – един </span><span class=Code><span lang=BG>FileInputStream</span></span><span
lang=BG> и един </span><span class=Code><span lang=BG>BufferedReader</span></span><span
lang=BG>. Следва използването на потоците накрая следва задължителното им
затваряне преди да се излезе от метода. Задължителното затваряне на потоците е
проблемна ситуация, защото от метода може да се излезе по няколко начина:</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>По време на инициализиране на първия поток възникне непред­видено
изключение.</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>По време на инициализиране на втория поток възникне непред­видено
изключение.</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>По </span><span lang=BG>време</span><span lang=BG> на използването на
потоците възниква непредвидено изключение.</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Между инициализирането и затварянето на потоците се използват израза </span><span
class=Code><span lang=BG>return</span></span><span lang=BG>.</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Всичко е нормално и не възникват никакви изключения.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Така написан
примерът е логически грешен, защото потоците ще се затворят правилно само в
първия и последния случай. Във втория случай вторият поток няма да се затвори,
а в третия и четвъртия случай и двата потока няма да се затворят. Тук не
взимаме под внимание възможността отварянето използването и затварянето на
потоците да е част от тяло на цикъл, където може да се използва изразите </span><span
class=Code><span lang=BG>continue </span></span><span lang=BG>и</span><span
class=Code><span lang=BG> break</span></span><span lang=BG>, което също ще
доведе до не затваряне на потоците.</span></p>

<h3><a name="_Toc218195902"><span lang=BG>Решение на проблема</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всички тези
главоболия можем да си спестим като използваме конструк­цията </span><span
class=Code><span lang=BG>try-finally</span></span><span lang=BG>. Ще разгледаме
първо пример с един поток, а след това и за два и повече потока.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Сигурното
затваряне на поток се прави по следния начин:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;fileName.txt&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing &quot;fis&quot;</span><span
  style='font-family:"Courier New";color:#006600'> here ...</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>A</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>lways close &quot;fis&quot;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fis != </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да анализираме
примера.</span><span lang=BG> </span><span lang=BG>Първоначално декларираме
променлива </span><span class=Code><span lang=BG>fis</span></span><span
lang=BG> от тип </span><span class=Code><span lang=BG>FileInputStream</span></span><span
lang=BG>, след това отваряме </span><span class=Code><span lang=BG>try</span></span><span
lang=BG> блок, в който инициали­зираме нов файлов поток, използваме го и накрая
го затваряме във </span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> блок. Каквото и да стане при използването и инициализацията сме
сигурни, че потока ще бъде затворен. Ако има проблем при инициализацията –
например липсващ файл то ще се хвърли </span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG> и променливата </span><span class=Code><span lang=BG>fis</span></span><span
lang=BG> ще остане със стойност </span><span class=Code><span lang=BG>null</span></span><span
lang=BG>. За тези случай и за да се избегне </span><span class=Code><span
lang=BG>NullPointerException</span></span><span lang=BG> е необходимо да се
прибави проверка дали </span><span class=Code><span lang=BG>fis</span></span><span
lang=BG> не е </span><span class=Code><span lang=BG>null</span></span><span
lang=BG> преди да се извика метода </span><span class=Code><span lang=BG>close()</span></span><span
lang=BG> на потока. Ако имаме </span><span class=Code><span lang=BG>null</span></span><span
lang=BG> то потока изобщо не е бил инициали­зиран и няма нужда да бъде
затварян.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Горния пример
трябва подходящо да обработи всички checked exceptions, които възникват при
инициализиране (</span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG>) и изпол­зване на файловия поток. В примера възможните изключения
просто се изхвърлят от метода. Понеже те всички са наследници на </span><span
class=Code><span lang=BG>IOException</span></span><span lang=BG> в декларацията
на метода се използва само това изключение.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Даденият пример е
за файлови потоци, но може да се използва за произволни ресурси, които изискват
задължително освобождаване след приключване на работата с тях. Такива ресурси
могат да бъдат връзки към отдалечени компютри, връзки с бази данни и др.</span></p>

<h3><a name="_Toc218195903"><span lang=BG>Алтернативно решение</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Опростена версия
на горния пример се явява следната конструкция:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>new</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> FileInputStream(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;fileName.txt&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing &quot;fis&quot;</span><span
  style='font-family:"Courier New";color:#006600'> here …</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis.close();</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Предимството е
по-краткия запис – спестяваме една излишна декларация на променливата </span><span
class=Code><span lang=BG>fis</span></span><span lang=BG> и избягваме проверката
за </span><span class=Code><span lang=BG>null</span></span><span lang=BG>.
Проверката за </span><span class=Code><span lang=BG>null</span></span><span
lang=BG> е излишна, защото инициализацията на потока е извън </span><span
class=Code><span lang=BG>try</span></span><span lang=BG> блока и ако е
възникнало изключение докато тя се изпълнява изобщо няма да се стигне до
изпълнение на </span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> блока и затварянето на потока.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Недостатък е
невъзможността да се обработят изключения възникнали при инициализацията в
същия </span><span class=Code><span lang=BG>try</span></span><span lang=BG>
блок. Трябва да използваме допълни­телен </span><span class=Code><span lang=BG>try</span></span><span
lang=BG> блок, който да прихване всички </span><span lang=BG>възможни checked
exceptions по време на инициализацията или да ги изхвърлим от самия метод.</span></p>

<h3><a name="_Toc218195904"><span lang=BG>Освобождаване на множество ресурси</span></a></h3>

<p class=MsoNormal><span lang=BG>Досега разгледахме използването на </span><span
class=Code><span lang=BG>try-finally</span></span><span lang=BG> за
освобождаване на един ресурс, а в примера имаме да затворим два потока. Добра
практика е ресурсите да се освобождават в ред обратен на този на заделянето им
– в нашия пример първо заделяме файлов, а след това и буфериран поток. Трябва
да ги освободим в обратния ред – първо буферирания, после и файловия поток.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>За освобождаването
на множество ресурси могат да се използват горните два подхода като </span><span
class=Code><span lang=BG>try-finally </span></span><span lang=BG>блоковете се
влагат един в друг:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>new</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  BufferedReader in = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>new</span></b><span lang=BG style='font-family:
  "Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing </span><span
  style='font-family:"Courier New";color:#006600'>&quot;</span><span lang=BG
  style='font-family:"Courier New";color:#006600'>in</span><span
  style='font-family:"Courier New";color:#006600'>&quot; here</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis.close();</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Другият вариант е всички
ресурси да се декларират предварително и накрая да се освободят в един
единствен </span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> блок с проверка за </span><span class=Code><span lang=BG>null</span></span><span
lang=BG>:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>BufferedReader in = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  in = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> BufferedReader(</span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing </span><span
  style='font-family:"Courier New";color:#006600'>&quot;</span><span lang=BG
  style='font-family:"Courier New";color:#006600'>in</span><span
  style='font-family:"Courier New";color:#006600'>&quot; here …</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (in != </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fis != </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>И двата подхода са правилни със съответните
предимства и недостатъци и се прилагат в зависимост от предпочитанията на
програмиста съобразно конкретната ситуация. Все пак вторият подход е малко
рисков, тъй като във </span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> блока възникне изключение (което почти никога не се случва) при затварянето
на първия поток, вторият поток няма да бъде затворен. При първия подход няма
такъв проблем, но се пише повече код.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Време е да се
върнем на нашия примерен метод и да го напишем по правилен начин. Да използваме
влагането на </span><span class=Code><span lang=BG>try-finally </span></span><span
lang=BG>блокове описано преди малко.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> IOException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     BufferedReader in = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>new</span></b><span lang=BG
  style='font-family:"Courier New";color:black'> BufferedReader(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>U</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>sing </span><span
  style='font-family:"Courier New";color:#006600'>&quot;</span><span lang=BG
  style='font-family:"Courier New";color:#006600'>in</span><span
  style='font-family:"Courier New";color:#006600'>&quot; here …</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>А сега, нека обобщим всичко научено досега в
един общ пример.</span></p>

<h2><a name="_Toc218195905"><span lang=BG>Обобщение</span></a></h2>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Примерният клас </span><span
class=Code><span lang=BG>ReadFile</span></span><span lang=BG> обобщава
наученото досега и групира в една цялостна програма примерите разглеждани до
момента:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  background:#F3F3F3;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  class=Code><span lang=BG>ReadFile.java</span></span></p>
  </td>
 </tr>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.BufferedReader;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileInputStream;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileNotFoundException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.IOException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.InputStreamReader;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ReadFile {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>readFile</b>(String fileName) </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> IOException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     BufferedReader in = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(fileName);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       in = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> BufferedReader(</span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> InputStreamReader(fis));</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       String tmp = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ((tmp = in.readLine()) != </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          System.out.println(tmp);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException e) {</span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>       System.out.println(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;The file \&quot;&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> + fileName </span></p>
  <p class=MsoNormal style='margin-top:0in'><span lang=BG style='font-family:
  "Courier New";color:black'>                   + </span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;\&quot; does not exist!
  Unable to read it.&quot;</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (in != </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          in.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fis != </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>null</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> <b>main</b>(String[] args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       <i>readFile</i>(</span><span lang=BG style='font-family:
  "Courier New";color:#2A00FF'>&quot;C:\\tools\\eclipse\\eclipse.ini&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Голяма част от възможностите на изключенията
са илюстрирани с този пример. Това са прихващане на изключение, прихващане на
нива, прих­ващане на група от изключения, пропускане на изключения към извикващ
метод в стека, обработка на изключения и почистване на заети ресурси.</span></p>

<h2><a name="_Toc218195906"><span lang=BG>Спорът около </span></a>c<span
lang=BG>hecked изключенията</span></h2>

<p class=MsoNormal><span lang=BG>Няколко библиотеки в Java използват checked
изключения доста обширно. Библиотеките за работа с потоци, за комуникация по
мрежата, за работа с файлове, JDBC (за работа с релационни бази от данни) – всички
те използват главно checked изключения.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Има твърдения, че
в тези авторите на тези библиотеки са прекалили с употребата на такъв вид
изключения и че това трябва да се промени. Това е един обширен спор, който се
води в Java общността. Защитниците на тази теза дават следния пример:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>package</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> introjavabook;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileInputStream;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileNotFoundException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.IOException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> CatchInFinally {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> main(String... args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     FileInputStream fis = </span><b><span lang=BG
  style='font-family:"Courier New";color:#7F0055'>null</span></b><span lang=BG
  style='font-family:"Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;file.bin&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);       </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>byte</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>[] data = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>byte</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>[10];</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       fis.read(data, 0, 10); </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(FileNotFoundException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       e.printStackTrace();StackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> { </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>Note:
  we have try-catch in the finally block</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          e.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Тези защитници твърдят, че в повечето случаи
тези изключения не са толкова важни, за да бъдат checked – което предполага
обработка.</span></p>

<p class=MsoNormal><span lang=BG>От Sun, обаче са против тази промяна и
предпочитат разработчиците да пишат повече код, но да са сигурни, че са
предвидили всяка една ситуация.</span></p>

<p class=MsoNormal><span lang=BG>В общността има предложения </span><span
class=Code><span lang=BG>close()</span></span><span lang=BG> методът във всички
потоци да се промени, така че да не хвърля checked exception (както е в .NET
Framework), но дали това изменение ще бъде въведено в някоя следваща версия на
Java платформата можем само да гадаем.</span></p>

<h2><a name="_Toc218195907"><span lang=BG>Предимства при използване на
изключения</span></a></h2>

<p class=MsoNormal><span lang=BG>След като се запознахме подробно с
изключенията, техните свойства и с това как да работим с тях, нека разгледаме
причините те да бъдат въведени и да придобият широко разпространение.</span></p>

<h3><a name="_Toc218195908"><span lang=BG>Отделяне на кода за обработка на
грешките</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Използването на
изключения позволява да се отдели кода описващ нормалното протичане на една
програма от кода необходим в изключи­телни ситуации и кода необходим при
обработване на грешки. Това ще демонстрираме със следния пример, които е
псевдокод на примера разгледан от началото на главата.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>readFile() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  openFileInputStream();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fileHasMoreLines) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     readNextLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     printTheLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  closeTheFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Нека сега преведем последователността от
действия на български:</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Отваряме файл;</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Четем следващ ред от файла до края;</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Изписваме прочетения ред;</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Затваряме файла;</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Методът е добре
написан, но ако се вгледаме по-внимателно започват да възникват въпроси:</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Какво ще стане, ако няма такъв файл?</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Какво ще стане, ако файлът не може да се отвори (например, ако друг
процес вече го е отворил за писане)?</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Какво ще стане, ако пропадне четенето на някой ред?</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG style='font-family:"Arial","sans-serif"'>-<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Какво ще стане, ако файла не може да се затвори?</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да допишем метода,
така че да взима под внимание тези въпроси, без да използваме изключения, а да
използваме кодове за грешка връщани от всеки използван метод (кодовете за
грешка са стандартен похват за обработка на грешките в процедурно ориентираното
програмиране. Всеки метод връща </span><span class=Code><span lang=BG>int</span></span><span
lang=BG>, който определя дали методът е изпълнен правилно. Код за грешка 0
означава, че всичко е правилно, код различен от 0 означава различен тип
грешка).</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>errorCode readFile() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  errorCode = 0;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  openFileErrorCode = openFileInputStream();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// File is open</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (openFileErrorCode = 0) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fileHasMoreLines) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       readLineErrorCode = readNextLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (readLineErrorCode == 0) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>L</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>ine read properly</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          printTheLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>E</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>rror during line read</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          errorCode = -1;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>          </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>break</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     closeFileErrorCode = closeTheFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (closeFileErrorCode != 0 &amp;&amp; errorCode == 0) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       errorCode = -2;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       errorCode = -3;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (openFileErrorCode = -1) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>F</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>ile does not exists</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     errorCode = -4;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (openFileErrorCode = -2) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>F</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>ile can’t be open</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     errorCode = -5;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>return</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> errorCode;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Получава се един
доста замотан, трудно разбираем и лесно объркващ – </span>&quot;<span lang=BG>спагети</span>&quot;<span
lang=BG> код. Логиката на програмата е силно смесена с логиката за обработка на
грешките и непредвидените ситуации. По-голяма част от кода е тази за правилна
обработка на грешките.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всички тези
нежелателни последици се избягват при използването на изключения. Ето колко
по-прост и чист е псевдокода на същия метод, само че с изключения:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>readFile() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     openFileInputStream();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>while</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (fileHasMoreLines) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       readNextLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       printTheLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     closeTheFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (FileNotFoundException) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     doSomething;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     doSomething;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Всъщност
изключенията не ни спестяват усилията при намиране и обработка на грешките, но
ни позволяват да правим това по далеч по-елегантен, и ефективен начин.</span></p>

<h3><a name="_Toc218195909"><span lang=BG>Групиране на различните видове грешки</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Йерархичната
същност на изключенията позволява наведнъж да се прихванат и обработват цели
групи от тях. Когато използваме </span><span class=Code><span lang=BG>catch</span></span><span
lang=BG>, ние не прихващаме само дадения тип изключение, а цялата йерархия на типо­вете
изключения</span>,<span lang=BG> наследници на декларирания от нас тип.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// </span><span style='font-family:"Courier New";color:#006600'>H</span><span
  lang=BG style='font-family:"Courier New";color:#006600'>andle IOException and
  all its descendants</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Горният пример ще прихване не само
IOException, но и всички негови наследници в това число </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG
style='font-family:"Courier New";color:black'>, </span><span class=Code><span
lang=BG>EOFException</span></span><span lang=BG style='font-family:"Courier New";
color:black'>, </span><span class=Code><span lang=BG>RemoteException</span></span><span
lang=BG style='font-family:"Courier New";color:black'> и десетки други.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Въпреки че не е
добра практика, е възможно да направим прихващане на абсолютно всички
изключения:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (Exception e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// A (too) general exception handler</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>И дори на всичко,
което може да се хвърля – всички </span><span class=Code><span lang=BG>Throwable</span></span><span
lang=BG> класове.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (</span><span lang=BG style='font-family:"Courier New";
  color:black'>Throwable </span><span lang=BG style='font-family:"Courier New";
  color:black'>e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// A (too, too) general exception handler</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Прихващането на </span><span class=Code><span
lang=BG>Exception</span></span><span lang=BG style='font-family:"Courier New";
color:black'> </span><span lang=BG>и</span><span lang=BG style='font-family:
"Courier New";color:black'> </span><span class=Code><span lang=BG>Throwable</span></span><span
lang=BG> не е добра практика и се предпочита прихващането на по-конкретни групи
от изключения като </span><span class=Code><span lang=BG>IOException</span></span><span
lang=BG> или на един единствен тип изключение като например </span><span
class=Code><span lang=BG>FileNotFoundException</span></span><span lang=BG>.</span></p>

<h3><a name="_Toc218195910"><span lang=BG>Предаване на грешките за обработка в
стека на методите – прихващане на нива</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Възможността за
прихващането на изключения на нива е изключително удобна. Тя позволява
обработката на изключението да се направи на най-подходящото място. Нека
илюстрираме това с прост пример-сравнение с остарелите кодове за грешка. Нека
имаме следната структура от методи:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method3() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  method2();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method2() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  method1();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method1() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  readFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Метода </span><span
class=Code><span lang=BG>method3()</span></span><span lang=BG> извиква </span><span
class=Code><span lang=BG>method2()</span></span><span lang=BG>, който от своя
страна извиква </span><span class=Code><span lang=BG>method1()</span></span><span
lang=BG> където се вика </span><span class=Code><span lang=BG>readFile()</span></span><span
lang=BG>. Да предположим, че </span><span class=Code><span lang=BG>method3()</span></span><span
lang=BG> е този който се интересува от възможна възникнала грешка в метода </span><span
class=Code><span lang=BG>readFile()</span></span><span lang=BG>. Нека сега си
представим, че възникне грешка в метода </span><span class=Code><span lang=BG>readFile(),
</span></span><span lang=BG>която</span><span class=Code><span lang=BG> </span></span><span
lang=BG>трябва да се обработи от </span><span class=Code><span lang=BG>method3()</span></span><span
lang=BG>. Това не би било никак лесно:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method3() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  errorCode = method2();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (errorCode != 0)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     process the error;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span style='font-family:"Courier New";color:black'>do
  </span><span lang=BG style='font-family:"Courier New";color:black'>actual
  work;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>errorCode method2() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  errorCode = method1();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (errorCode != 0)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>return</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> errorCode;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span style='font-family:"Courier New";color:black'>do
  </span><span lang=BG style='font-family:"Courier New";color:black'>actual
  work;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>errorCode method1() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  errorCode = readFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (errorCode != 0)</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>return</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> errorCode;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>else</span></b></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span style='font-family:"Courier New";color:black'>do
  </span><span lang=BG style='font-family:"Courier New";color:black'>actual
  work;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span style='font-family:"Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Като начало в </span><span
class=Code><span lang=BG>method1()</span></span><b><span lang=BG> </span></b><span
lang=BG>трябва анализираме кода за грешка връщан от метода </span><span
class=Code><span lang=BG>readFile()</span></span><span lang=BG> и евентуално да
предадем на </span><span class=Code><span lang=BG>method2()</span></span><span
lang=BG>. В </span><span class=Code><span lang=BG>method2() </span></span><span
lang=BG>трябва да анализираме кода за грешка връщан от </span><span class=Code><span
lang=BG>method1()</span></span><span lang=BG> и евентуално да го предадем на</span><span
class=Code><span lang=BG> method3()</span></span><span lang=BG>, където да се
обработи самата грешка.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Как можем да
избегнем всичко това? Да си припомним, че виртуалната машина търси прихващане
на изключения назад в стека на извикване на методите и позволява на всеки един
от методите в стека да дефинира прихващане и обработка на изключението. Ако
методът не е заинтере­сован, чрез </span><span class=Code><span lang=BG>throws</span></span><span
lang=BG> клаузата, просто препраща изключението по-назад в стека:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method3() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     method2();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (exception e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     process the exception;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method2() </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> exception {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  method1();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>method1() </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> exception {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  readFile();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span style='font-family:"Courier New";color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако възникне
грешка при четенето на файл, то тя ще се пропусне от </span><span class=Code><span
lang=BG>method1()</span></span><span lang=BG> и</span><span class=Code><span
lang=BG> method2() </span></span><span lang=BG>и ще се прихване и обработи чак
в</span><span class=Code><span lang=BG> method3(), </span></span><span lang=BG>където
всъщност е подходящото място за обработка на грешката.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Както се вижда от
псевдокода методите </span><span class=Code><span lang=BG>method2()</span></span><span
lang=BG> и</span><span class=Code><span lang=BG> method1()</span></span><span
lang=BG> все пак трябва да знае какво да пропусне чрез клаузата </span><span
class=Code><span lang=BG>throws</span></span><span lang=BG>.</span></p>

<h2><a name="_Toc218195911"></a><a name="_Добри_практики_при"></a><span
lang=BG>Добри практики при работа с изключения</span></h2>

<p class=MsoNormal><span lang=BG>В настоящата секция ще дадем някои препоръки и
утвърдени практики за правилно използване на механизмите на изключенията за
обработка на грешки и необичайни ситуации. Това са важни правила, които трябва
да запомните и следвате. Не ги пренебрегвайте!</span></p>

<h3><a name="_Toc218195912"><span lang=BG>Кога да разчитаме на изключения</span></a>?</h3>

<p class=MsoNormal><span lang=BG>За да разберем кога е добре да разчитаме на
изключения и кога не, нека разгледаме следния пример:</span></p>

<p class=MsoNormal><span lang=BG>Имаме програма, която отваря файл по зададени
път и име на файл от потребителя. Потребителят може да обърка името на файла
докато го пише. Тогава това събитие по-скоро трябва да се счита за нормално, а
не за изключително.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Срещу подобно
събитие можем да се защитим като първо проверим дали файлът съществува и чак
тогава да се опитаме да го отворим:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  background:#F3F3F3;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  class=Code><span lang=BG>OpenFileTest.java</span></span></p>
  </td>
 </tr>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>package</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> introjavabook;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.File;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.io.FileNotFoundException;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>import</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> java.util.Scanner;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>class</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> OpenFileTest {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>public</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>static</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> main(String... args) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     File f = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> File(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;f.txt&quot;</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>if</span></b><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'> </span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(!f.exists()) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       System.</span><i><span lang=BG style='font-family:"Courier New";
  color:#0000C0'>out</span></i><span lang=BG style='font-family:"Courier New";
  color:black'>.println(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;The file does not exist</span><span style='font-family:
  "Courier New";color:#2A00FF'>s.</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>return</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     Scanner s</span><span style='font-family:"Courier New";
  color:black'>can</span><span lang=BG style='font-family:"Courier New";
  color:black'> = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> Scanner(f);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     String line = s</span><span style='font-family:"Courier New";
  color:black'>can</span><span lang=BG style='font-family:"Courier New";
  color:black'>.nextLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     System.</span><i><span lang=BG style='font-family:"Courier New";
  color:#0000C0'>out</span></i><span lang=BG style='font-family:"Courier New";
  color:black'>.println(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;The first line of the file: &quot;</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'> </span><span lang=BG
  style='font-family:"Courier New";color:black'>+</span><span lang=BG
  style='font-family:"Courier New";color:black'> </span><span lang=BG
  style='font-family:"Courier New";color:black'>line);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако файлът липсва,
ще получим съобщението:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code><span lang=BG>The file does not exist</span></span><span
  class=Code>s.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Другият вариант да
имплементираме същата логика е следният:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>File f = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> File(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;f.txt&quot;</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>Scanner s</span><span style='font-family:"Courier New";
  color:black'>can</span><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  s</span><span style='font-family:"Courier New";color:black'>can</span><span
  lang=BG style='font-family:"Courier New";color:black'> = </span><b><span
  lang=BG style='font-family:"Courier New";color:#7F0055'>new</span></b><span
  lang=BG style='font-family:"Courier New";color:black'> Scanner(f);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'> </span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(FileNotFoundException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  System.</span><i><span lang=BG style='font-family:"Courier New";
  color:#0000C0'>out</span></i><span lang=BG style='font-family:"Courier New";
  color:black'>.println(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;The file does not exist</span><span style='font-family:
  "Courier New";color:#2A00FF'>s</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>.&quot;</span><span lang=BG style='font-family:"Courier New";
  color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>return</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>String line = s</span><span style='font-family:"Courier New";
  color:black'>can</span><span lang=BG style='font-family:"Courier New";
  color:black'>.nextLine();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>System.</span><i><span lang=BG style='font-family:"Courier New";
  color:#0000C0'>out</span></i><span lang=BG style='font-family:"Courier New";
  color:black'>.println(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;The first line of the file: &quot;</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'> </span><span lang=BG
  style='font-family:"Courier New";color:black'>+</span><span lang=BG
  style='font-family:"Courier New";color:black'> </span><span lang=BG
  style='font-family:"Courier New";color:black'>line);</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>По принцип вторият
вариант се счита за по-лош, тъй като изключенията трябва да се ползват за
изключителна ситуация, а липсата на файла в нашия случай е по-скоро обичайна
ситуация.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Лоша практика е да
се разчита на изключения за обработка на очаквани събития и от гледна точка на
производителността. Хвърлянето на изклю­чение е бавна операция – трябва да се
инициализира stack trace, трябва да се открие обработчик на това изключение и
т.н.</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Точната граница между очаквано и
  неочаквано поведение е трудно да бъде ясно дефинирана. Най-общо очаквано
  събитие е нещо свързано с функцио­налността на програ­мата. Въвеждането на
  грешно име на файла е пример за такова. Спирането на тока докато работи тази
  програма, обаче не е очаквано събитие.</span></p>
  </td>
 </tr>
</table>

<h3><a name="_Toc218195913"><span lang=BG>Да хвърляме ли изключения на
потребителя?</span></a></h3>

<p class=MsoNormal><span lang=BG>Изключенията са неясни и объркващи за
обикновения потребител. Те създават впечатление за лошо написана програма,
която &quot;гърми некон­тролирано&quot; и има бъгове. Представете си какво ще
си помисли една въз­растна лелка, което въвежда фактури, ако внезапно
приложението й покаже следния диалог:</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=BG><img
border=0 width=498 height=204
src="image105.gif"></span></p>

<p class=MsoNormal><span lang=BG>Този диалог е много подходящ за технически
лица, но е изключително неподходящ за крайния потребител (особено, когато той
няма технически познания).</span></p>

<p class=MsoNormal><span lang=BG>Вместо този диалог можем да покажем друг,
много по-дружелюбен и разбираем за обикновения потребител</span>:</p>

<p class=MsoNormal><span lang=BG><img border=0 width=528 height=364
src="image106.jpg"></span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Това е добрият
начин да показваме съобщения за грешка: хем да има разбираемо съобщение на
езика на потребителя (в случая на български език), хем да има и техническа
информация, която може да бъде извлечена при нужда, но не се показва в самото
начало, за да не стряска потребителите.</span></p>

<p class=MsoNormal><span lang=BG>Препоръчително е изключения, които не са
хванати от никой, а такива може да са само runtime изключенията или грешките,
да се хващат от общ глобален &quot;прихващач&quot;, който да ги записва (в
най-общия случай) някъде, а на потребителя да показва &quot;приятелско&quot;
съобщение в стил: &quot;Възникна грешка, опитайте по-късно&quot;. Добре е
винаги да показвате освен съобще­ние разбираемо за потребителя и техническа
информация (stack trace), която, обаче е достъпна само ако потребителят я поиска</span>.</p>

<h3><a name="_Toc218195914"><span lang=BG>Хвърляйте изключенията на съответното
ниво на абстракция!</span></a></h3>

<p class=MsoNormal><span lang=BG>Когато хвърляте ваши изключения, съобразявайте
се с абстракциите, в контекста, на които работи вашият метод. Например, ако
вашият метод се отнася за работа с масиви, може да хвърлите и </span><span
class=Code><span lang=BG>ArrayIndexOutOfRange</span></span><span lang=BG> или </span><span
class=Code><span lang=BG>NullPointerException</span></span><span lang=BG>, тъй
като вашият метод работи на ниско ниво и оперира директно с паметта и с
елементите на масивите. Ако, обаче имате метод, който извършва олихвяване на
всички сметки в една банка, той не трябва да хвърля </span><span class=Code><span
lang=BG>ArrayIndexOutOfRange</span></span><span lang=BG>, тъй като това
изключение не е от бизнес областта на банковия сектор и олихвяването. Нормално
е олихвяването да хвърли изключение </span><span class=Code><span lang=BG>InvalidInterestException</span></span><span
lang=BG> с подхо­дящо съобщение за грешка от бизнес областта на банките, за
което би могло да бъде закачено оригиналното изключение </span><span
class=Code><span lang=BG>ArrayIndexOutOfRange</span></span><span lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>Представете си да сте си купили билет за
автобус и пристигайки на автогарата омаслен монтьор да ви обясни, че ходовата
част на автобуса има нужда от реглаж. Освен, ако не сте монтьор или специалист
по авто­мобили, тази информация не ви помага с нищо. Нито става ясно колко ще
се забави вашето пътуване, нито дали въобще ще пътувате. Вие очаквате, ако има
проблем да ви посрещне усмихната девойка от фирмата-превоз­вач и да ви обясни,
че резервният автобус ще дойде след 10 минути и до тогава можете да изчакате на
топло в кафенето.</span></p>

<p class=MsoNormal><span lang=BG>Същото е с програмирането – ако хвърляте
изключения, които не са от бизнес областта на компонента или класа, който
разработвате, има голям шанс да не ви разберат и грешката да не бъде обработена
правилно.</span></p>

<p class=MsoNormal><span lang=BG>Можем да дадем още един пример: извикваме
метод, който сортира масив с числа и той хвърля изключение </span><span
class=Code><span lang=BG>DatabaseTransactionAborted</span></span>. <span
lang=BG>Това е също толкова неадекватно съобщение, колкото и </span><span
class=Code><span lang=BG>NullPointerException</span></span><span lang=BG> при
изпълнение на олихвяването в една банка. Веднага ще си помислите &quot;каква
транзакция, нали сортираме масив&quot; и този въпрос е напълно адек­ватен.
Затова се съобразявайте с нивото на абстракция, на което работи дадения метод,
когато хвърляте изключение от него.</span></p>

<h3><a name="_Toc218195915"><span lang=BG>Ако изключението има причинител,
запазвайте го!</span></a></h3>

<p class=MsoNormal><span lang=BG>Винаги, когато при прихващане на изключение
хвърляте ново изключение от по-високо ниво на абстракция, добавяйте към него
оригиналното изключение. По този начин ползвателите на вашия код ще могат
по-лесно да установят точната причина за грешката и точното място, където тя
възниква в началния момент. Това правила е частен случай на по-генералното
правило, че всяко изключение трябва да носи в себе си максимално подробна
информация за настъпилия проблем.</span></p>

<h3><a name="_Toc218195916"><span lang=BG>Давайте подробно описателно съобщение
при хвърляне на изключение!</span></a></h3>

<p class=MsoNormal><span lang=BG>Съобщението за грешка, което всяко изключение
носи в себе си е изключително важно. В повечето случаи то е напълно достатъчно,
за да разберете какъв точно е проблемът, който е възникнал. Ако съобщението е
неадекватно, ползвателите на вашия метод няма да са щастливи и няма да решат
бързо проблема.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Да вземем един
пример: имате метод, който прочита настройките на дадено приложение от текстов
файл. Това са примерно местоположенията и размерите на всички прозорци в
приложението и други настройки. Случва се проблем при четенето на файла с
настройките и получавате съобщение за грешка:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code>Error.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Това достатъчно ли
ви е, за да разберете какъв е проблемът? Очевидно не е. Какво съобщение трябва
да дадем, така че то да е достатъчно информативно? Това съобщение по-добро ли
е?</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code>Error</span><span class=Code><span
  lang=BG> reading settings file</span></span><span class=Code>.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Очевидно горното
съобщение е по-адекватно, но е недостатъчно. То обяснява каква е грешката, но
не обяснява причината за възникването й. Да предположим, че променим
програмата, така че да дава следната информация за грешката:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code>Error</span><span class=Code><span
  lang=BG> reading settings file: C:\Users\Administrator\MyApp</span></span><span
  class=Code>\MyApp.settings</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Това съобщение
очевидно е по-добро, защото ни подсказва в кой файл е проблемът (нещо, което би
ни спестил много време, особено ако не сме запознати с приложението и не знаем
къде точно то пази файла с настройките си). Може ситуацията да е дори по-лоша –
може да нямаме сорс кода на въпросното приложение или модул, който генерира
греш­ката. Тогава е възможно да нямаме пълен stack trace (ако сме компи­лирали
без дебъг информация) или ако имаме stack trace, той не ни върши работа, защото
нямаме сорс кода на проблемния файл, хвърлил изключението. Затова съобщението
за грешка трябва да е още по-подробно, например като това:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span class=Code>Error</span><span class=Code><span
  lang=BG> reading settings file: C:\Users\Administrator\MyApp</span></span><span
  class=Code>\MyApp.settings</span><span class=Code><span lang=BG>. </span></span><span
  class=Code>Number expected at line 17.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Това съобщение вече само говори за проблема.
Очевидно имаме грешка на ред 17 във файла </span><span class=Code><span
lang=BG>MyApp.settings</span></span><span lang=BG>, който се намира в папката </span><span
class=Code><span lang=BG>C:\Users\Administrator\MyApp</span></span><span
lang=BG>. В този ред трябва да има число, а има нещо друго. Ако отворим файл,
бързо можем да намерим проблема, нали?</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Изводът от този
пример е само един:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Винаги давайте адекватно, подробно и
  конкретно съобще­ние за грешка, когато хвърляте изключение! Ползвателят на
  вашия код трябва само като прочете съобщението, веднага да му стане ясно
  какъв точно е проблемът, къде се е случил и каква е причината за него.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Ще дадем още няколко примера:</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Имаме метод, който търси число в масив. Ако той хвърли </span><span
class=Code><span lang=BG>IndexOutOfRangeException</span></span><span lang=BG>,
от изключително значение е индексът, който не може да бъде достъпен, примерно
18 при масив с дължина 7.</span><span lang=BG> </span><span lang=BG>Ако не
знаем позицията, трудно ще разберем защо се получава излизане от масива.</span></p>

<p class=MsoNormal style='margin-left:28.4pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Имаме метод, който чете числа от файл. Ако във файла се срещне някой
ред, на който няма число, би трябвало да получим грешка, която обяснява, че на
ред 17 (примерно) се очаква число, а там има стринг (и да се отпечата точно
какъв стринг има там).</span></p>

<p class=MsoNormal style='margin-top:6.0pt;margin-right:0in;margin-bottom:6.0pt;
margin-left:28.4pt;text-indent:-14.2pt'><span lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=BG>Имаме метод, който изчислява стойността на числен
израз. Ако намерим грешка в израза, изключението трябва да съобщава каква
грешка е възникнала и на коя позиция. Кодът, който предизвиква грешката може да
ползва </span><span class=Code><span lang=BG>String.format</span></span><span
lang=BG>, за да изгради съобщението за грешка. Ето един пример:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:6.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throw</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> ExpressionParseException(</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  String.format(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;Invalid character at position %d.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'> +</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     &quot;</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>Number expected but found character '%s'.&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>, index, ch);</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Има само едно нещо по-лошо от изключение без
достатъчно информация и то е изключение с грешна информация. Например, ако в
последния пример съобщим за грешка на ред 3, а грешката е на ред 17, това е
изключително заблуждаващо и е по-вредно, отколкото просто да кажем, че има
грешка без подробности. Внимавайте да не отпечатвате грешни съобщения за грешка!</span></p>

<h3><a name="_Toc218195917"><span lang=BG>За съобщенията за грешки използвайте
английски език</span></a></h3>

<p class=MsoNormal><span lang=BG>Това правило е много просто. То е частен
случай на принципа, че целият сорс код на програмите ви (включително
коментарите и съобщенията за грешки) трябва да са на английски език. Причината
за това е, че това е единственият език, който е разбираем за всички програмисти
по света. Никога не знаете дали кодът, който пишете няма в някой слънчев ден да
се ползва от чужденци. Хубаво ли ще ви е, ако ползвате чужд код и той ви
съобщава за грешки примерно на виетнамски език?</span></p>

<h3><a name="_Toc218195918"><span lang=BG>Никога не игнорирайте прихванатите
изключения!</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Никога не
игнорирайте изключенията, които прихващате, без да ги обра­ботите. Ето един
пример как не трябва да правите:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;file.bin&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);       </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>byte</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>[] data = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>byte</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>[10];</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis.read(data, 0, 10); </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(FileNotFoundException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>В този пример авторът на този ужасен код
прихваща изключенията и ги игнорира. Това означава, че ако липсва файлът, който
търсим, програмата няма да прочете нищо от него, но няма и да съобщи за грешка.
Ползва­телят на този код бъде заблуден, че файлът е бил прочетен, а той
всъщност липсва.</span></p>

<p class=MsoNormal><span lang=BG>Начинаещите програмисти понякога пишат такъв
код, защото компи­ла­торът ги задължава да прихващат изключенията при работа с
файлове и те не знаят как да го направят. Вие нямате причина да пишете такъв
код!</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ако все пак,
понякога вашата програмна логика изисква да игнорирате изключение, направете го,
но сложете изрично коментар, с който обясня­вате действията си. Ето едно
типично изключение от това правило:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>FileInputStream fis = </span><b><span lang=BG style='font-family:
  "Courier New";color:#7F0055'>null</span></b><span lang=BG style='font-family:
  "Courier New";color:black'>;</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  fis = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> FileInputStream(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;file.bin&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Read the file here </span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>finally</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     fis.close();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'>(IOException e) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Ignore the exception. The file is already closed</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New"'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>В примера по-горе си позволяваме да игнорираме
изключението, което може да възникне при затваряне на файл, защото ако файлът
не може да бъде затворен, това означава, че той или е бил вече затворен от
някой други, или не може да бъде затворен и няма смисъл да го мъчим повече. И в
двата случая няма по-адекватна обработка на грешката, освен да я игнорираме.</span></p>

<h3><a name="_Toc218195919"><span lang=BG>Отпечатвайте съобщенията за грешка на
конзолата само в краен случай!</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>В много книги за </span>J<span
lang=BG>ava ще видите изключенията да се обработват като просто се отпечатат на
конзолата:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Some code here</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (Exception ex) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  ex.printStackTrace();</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Този код е изключително грешен, защото не дава
възможност на извик­ващия метод да обработи грешката и да се възстанови от нея.</span></p>

<p class=MsoNormal><span lang=BG>Представете си например нашия метод, който
чете настройките на прило­жението от текстов файл. Ако възникне грешка, той би
могъл да я отпечата на конзолата, но какво ще стане с извикващия метод? Той ще
си помисли, че настройките са били успешно прочетени, нали?</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Има едно много
важно правило в програмирането:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=54 style='width:40.6pt;border:solid windowtext 1.0pt;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=center style='margin-top:0in;text-align:center'><span
  lang=BG><img border=0 width=34 height=34
  src="image002.gif"></span></p>
  </td>
  <td width=477 style='width:357.9pt;border:solid windowtext 1.0pt;border-left:
  none;padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=WarningMessage><span lang=BG>Един метод или трябва да върши
  работата, за която е предназначен, или трябва да хвърля изключение.</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>Това правило можем да обясним в по-големи
детайли: Един метод се пише, за да свърши някаква работа. Какво върши методът
трябва да става ясно от неговото име. Ако не можем да дадем добро име на
метода, значи той е прави много неща и трябва да се раздели на части. Ако един
метод не може да свърши работата, за която е предназначен, той трябва да хвърли
изключение. Например, ако имаме метод за сортиране на масив с числа, ако
масивът е празен, методът или трябва да върне празен масив, или да съобщи за
грешка. Грешните входни данни трябва да предизвикват изключение, не грешен
резултат! Например, ако се опитаме да вземем от даден стринг с дължина 10
символа подстринг от позиция 7 до позиция 12, трябва да получим изключение, не
да вземем по-малко символи. Точно така работим методът </span><span class=Code><span
lang=BG>substring()</span></span><span lang=BG> в класа </span><span
class=Code><span lang=BG>String</span></span><span lang=BG>.</span></p>

<h3><a name="_Toc218195920"><span lang=BG>Не прихващайте всички изключения!</span></a></h3>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Една много често
срещана грешка при работата с изключения е да се прихващат всички грешки, без
оглед на техния тип. Ето един пример, при който грешките се обработват
некоректно:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  String fileContents = readFileContents(</span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;file.txt&quot;</span><span
  lang=BG style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>} </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (</span><span style='font-family:"Courier New";color:black'>Throwable</span><span
  style='font-family:"Courier New";color:black'> </span><span style='font-family:
  "Courier New";color:black'>t</span><span lang=BG style='font-family:"Courier New";
  color:black'>) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  System.</span><i><span lang=BG style='font-family:"Courier New";
  color:#0000C0'>out</span></i><span lang=BG style='font-family:"Courier New";
  color:black'>.println(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;File file.txt not found.&quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=BG>В този код предполагаме, че имаме метод </span><span
class=Code><span lang=BG>readFileContents()</span></span><span lang=BG>, който
прочита текстов файл и го връща като </span><span class=Code><span lang=BG>String</span></span><span
lang=BG>. Забелязваме, че </span><span class=Code><span lang=BG>catch</span></span><span
lang=BG> блокът прихваща наведнъж всички изключения (независимо от типа им), не
само </span><span class=Code><span lang=BG>FileNotFoundException</span></span><span
lang=BG>, и при всички случаи отпечатва, че файлът не е намерен. Хубаво, обаче
има ситуации, които са непредви­дени. Например какво става, когато файлът е
заключен от друг процес в операционната система. В такъв случай JVM ще се
генерира </span><span class=Code><span lang=BG>FileAccessDeniedException</span></span><span
lang=BG>, но съобщението за грешка, което програмата ще изведе, ще е грешно и
подвеждащо. По същия начин, ако при отварянето на файла свърши паметта, ще се
генерира съобщение </span><span class=Code><span lang=BG>OurOfMemoryError</span></span><span
lang=BG>, но отпечатаната грешка ще е отново некоректна.</span></p>

<p class=MsoNormal><span lang=BG>Изводът е от този пример е, че трябва да
обработваме само грешките, които очакваме и за които сме подготвени. Останалите
не трябва въобще да ги прихващаме.</span></p>

<h3><a name="_Toc218195921"><span lang=BG>Прихващайте само изключения, от които
разбирате и знаете как да обработите!</span></a></h3>

<p class=MsoNormal><span lang=BG>Вече обяснихме, че даден метод трябва да
прихваща само изключение, от които разбира, а не всички. Това е много важно
правило, което непре­менно трябва да спазвате. Ако не знаете как да обработите
даден exception, или не го прихващайте, или го обгърнете с ваш exception и го
хвърлете по стека да си намери обработчик. Това е правилото: или добавете
изключението в </span><span class=Code><span lang=BG>throws</span></span><span
lang=BG> декларацията на вашия метод или го хванете и го опаковайте във ваше
изключение и го хвърлете на извик­ващия метод. Иначе можете да стигнете до
некоректна обработка на грешки, която може да доведе до много странни проблеми.</span></p>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ето пример за
обработка на изключения чрез опаковане:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>private</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> readSettings() {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  File file = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> File(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;settings.txt&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>try</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     String fileContents = readFileContents(</span><span
  style='font-family:"Courier New";color:black'>file</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Parse the contents and load settings here ...</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  } </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>catch</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> (Exception ex) {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>     </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throw</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> RuntimeException(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;Can not read the &quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'> +</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>       </span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;settings from file &quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'> + file</span><span
  style='font-family:"Courier New";color:black'> + </span><span lang=BG
  style='font-family:"Courier New";color:#2A00FF'>&quot;</span><span
  style='font-family:"Courier New";color:#2A00FF'>.&quot;</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  }</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-bottom:6.0pt'><span lang=BG>Ето пример за
обработка на изключения чрез изхвърляне на изключе­нията, които не можем да
обработим адекватно:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:5.4pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=531 valign=top style='width:398.5pt;border:solid windowtext 1.0pt;
  padding:5.65pt 5.4pt 5.65pt 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>private</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>void</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> readSettings() </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>throws</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> IOException {</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  File file = </span><b><span lang=BG style='font-family:"Courier New";
  color:#7F0055'>new</span></b><span lang=BG style='font-family:"Courier New";
  color:black'> File(</span><span lang=BG style='font-family:"Courier New";
  color:#2A00FF'>&quot;settings.txt&quot;</span><span lang=BG style='font-family:
  "Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  String fileContents = readFileContents(</span><span
  style='font-family:"Courier New";color:black'>file</span><span lang=BG
  style='font-family:"Courier New";color:black'>);</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>  </span><span lang=BG style='font-family:"Courier New";
  color:#006600'>// Parse the contents and load settings here ...</span></p>
  <p class=MsoNormal align=left style='margin-top:0in;text-align:left;
  text-autospace:none'><span lang=BG style='font-family:"Courier New";
  color:black'>}</span></p>
  </td>
 </tr>
</table>

<h2><a name="_Toc218195922"><span lang=BG>Упражнения</span></a></h2>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Да се намерят всички стандартни изключения от йерархията на </span><span
class=Code><span lang=BG>java.io.IOException</span></span><span lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Да се намерят всички стандартни изключения от йерархията на </span><span
class=Code><span lang=BG>java.lang.RuntimeException</span></span><span lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Да се намерят методите хвърлящи</span><span lang=BG> </span><span
lang=BG>изключението </span><span class=Code><span lang=BG>java.lang.</span></span><span
class=Code><span lang=BG> </span></span><span class=Code><span lang=BG>IllegalArgumentException</span></span><span
lang=BG> и да се проучи причината за неговото хвърляне.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Да се намерят всички стандартни изключения от йерархията на </span><span
class=Code><span lang=BG>java.lang.IllegalArgumentException</span></span><span
lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Обяснете какво представляват изключенията, кога се използват и как се
прихващат.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Обяснете ситуациите, при които се използва </span><span class=Code><span
lang=BG>try</span></span><span lang=BG>-</span><span class=Code><span lang=BG>finally</span></span><span
lang=BG> конструк­цията.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Обяснете предимствата на използването на изключения.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Напишете метод, който приема като параметър име на текстов файл и
прочита съдържанието му и го връща като </span><span class=Code><span lang=BG>String</span></span><span
lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Напишете метод, който приема като параметър име на бинарен файл и
прочита съдържанието на файла и го връща като масив от байтове. Напишете метод,
който записва прочетеното съдържание в друг файл.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>10.<span
style='font:7.0pt "Times New Roman"'> </span></span><span lang=BG>Потърсете
информация в Интернет и дефинирайте собствен клас за изключение </span><span
class=Code><span lang=BG>FileParseException</span></span><span lang=BG>.</span><span
lang=BG> </span><span lang=BG>Вашето изключение трябва да съдържа в себе си
името на файл, който се обработва и номер на ред, в който възниква
изключението. Добавете подходящи конструктори за вашето изключение. Напишете
програма, която чете от текстов файл числа. Ако при четенето се стигне до ред,
който не съдържа число, хвърлете вашия exception и го обработете в извикващия
метод.</span></p>

<h2><a name="_Toc218195923"><span lang=BG>Решения и упътвания</span></a></h2>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Използвайте среда за разработка Eclipse и вградената възможност за
разглеждане на йерархии от класове. Отворете класа </span><span class=Code><span
lang=BG>java.io. IOException</span></span><span lang=BG> като използвате
вграденото търсене на класове – </span>[C<span lang=BG>trl-</span>S<span
lang=BG>hift-T</span>]<span lang=BG> и натиснете </span>[<span lang=BG>F4</span>],<span
lang=BG> за да отворите визуализатора на йерархии.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Разгледайте упътването за предходната задача.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Използвайте среда за разработка Eclipse и възможността за търсене на
използванията на даден клас. Отворете класа </span><span class=Code><span
lang=BG>java.lang.</span></span><span class=Code><span lang=BG> IllegalArgumentException</span></span><span
lang=BG>, позиционирайте курсора на дефиницията на класа и потърсете къде се
използва като натиснете </span>[C<span lang=BG>trl-H</span>]<span lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Разгледайте упътването за задача 1.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Използвайте информацията от началото на главата.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>При затруднения използвайте информацията от главата.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>При затруднения използвайте информацията от главата.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Прочетете файла ред по ред с класа </span><span class=Code><span
lang=BG>java.util.Scanner</span></span><span lang=BG> и добавяйте редовете в </span><span
class=Code><span lang=BG>StringBuilder</span></span><span lang=BG>.</span><span
lang=BG> </span><span lang=BG>Декларирайте в сигнатурата на метода, че изхвърля
</span><span class=Code><span lang=BG>IOException</span></span><span lang=BG> и
не обработвайте никакви изключения в него.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Малко е вероятно да напишете коректно този метод от първи път без чужда
помощ. Първо прочетете в Интернет как се работи с бинарни потоци. След това следвайте
препоръките по-долу за четенето на файла:</span></p>

<p class=MsoNormal style='margin-left:42.55pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Декларирайте в сигнатурата на метода, че изхвърля </span><span
class=Code><span lang=BG>IOException</span></span><span lang=BG> и не
обработвайте никакви изключения в него.</span></p>

<p class=MsoNormal style='margin-left:42.55pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Използвайте за четене </span><span class=Code><span lang=BG>FileInputStream</span></span><span
lang=BG>, а прочетените данни записвайте в </span><span class=Code><span
lang=BG>ByteArrayOutputStream</span></span><span lang=BG>.</span></p>

<p class=MsoNormal style='margin-left:42.55pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Внимавайте с метода за четене на байтове </span><span class=Code><span
lang=BG>read(byte[] buffer, int offset, int count)</span></span><span lang=BG>.
Този метод може да прочете по-малко байтове, отколкото сте заявени. Колкото
байта прочетете от входния поток, толкова трябва да запишете. Трябва да
организирате цикъл, който завършва при връщане на стойност -1.</span></p>

<p class=MsoNormal style='margin-left:42.55pt;text-indent:-14.2pt'><span
lang=BG>-<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=BG>Използвайте </span><span class=Code><span lang=BG>try</span></span><span
lang=BG>-</span><span class=Code><span lang=BG>finally</span></span><span
lang=BG>, за да затваряте потоците.</span></p>

<p class=MsoNormal style='margin-left:17.85pt'><span lang=BG>Записването на
масив от байтове във файл е далеч по-проста задача. Отворете </span><span
class=Code><span lang=BG>FileOutputStream</span></span><span lang=BG> и
запишете в него масива. Изхвърлете чрез throws всички изключения от метода.
Използвайте </span><span class=Code><span lang=BG>try</span></span><span
lang=BG>-</span><span class=Code><span lang=BG>finally</span></span><span
lang=BG>, за да затваряте потоците.</span></p>

<p class=MsoNormal style='margin-left:17.85pt'><span lang=BG>Накрая тествайте с
някой ZIP архив. Ако програмата ви работи неко­ректно, ще счупите структурата
на архива и ще се получава грешка при отваряне.</span></p>

<p class=MsoNormal style='margin-left:.25in;text-indent:-.25in'><span lang=BG>10.<span
style='font:7.0pt "Times New Roman"'> </span></span><span lang=BG>Наследете
класа </span><span class=Code><span lang=BG>Exception</span></span><span
lang=BG> и добавете подходящ конструктор, примерно </span><span class=Code><span
lang=BG>FileParseException(string msg, String filename, int line)</span></span><span
lang=BG>. След това ползвайте вашето изключение както ползвате всички други
изключения, които познавате. За четене на файла ползвайте </span><span
class=Code><span lang=BG>FileReader</span></span><span lang=BG> и от него
създайте </span><span class=Code><span lang=BG>BufferedReader</span></span><span
lang=BG>.</span></p>

<p class=MsoNormal><span lang=BG>&nbsp;</span></p>

</div>

<span lang=BG style='font-size:10.0pt;font-family:"Verdana","sans-serif"'><br
clear=all style='page-break-before:always'>
</span>

</div>

</body>

</html>
